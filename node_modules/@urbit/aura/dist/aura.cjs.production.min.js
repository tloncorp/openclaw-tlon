"use strict";function n(n){let t=!0,[e,r,u]=n.split("..");r=r||"0.0.0",u=u||"0000";let[s,c,l]=e.slice(1).split(".");"-"===s.at(-1)&&(s=s.slice(0,-1),t=!1);const[d,p,g]=r.split("."),h=u.split(".").map((n=>BigInt("0x"+n)));return function(n){const t=n.pos?a+BigInt(n.year):a-(BigInt(n.year)-1n),e=(()=>{let e=i(t)?f:o,r=n.time.day-1n,a=n.month-1n;for(;0n!==a;){const[n,...t]=e;r+=BigInt(n),a-=1n,e=t}let u=!0,s=t;for(;1==u;)s%4n!==0n?(s-=1n,r+=i(s)?366n:365n):s%100n!==0n?(s-=4n,r+=i(s)?1461n:1460n):s%400n!==0n?(s-=100n,r+=i(s)?36525n:36524n):(r+=s/400n*(4n*36524n+1n),u=!1);return r})();return n.time.day=e,m(n.time)}({pos:t,year:BigInt(s),month:BigInt(c),time:{day:BigInt(l),hour:BigInt(d),minute:BigInt(p),second:BigInt(g),ms:h}})}function t(n){const t={day:0n,hour:0n,minute:0n,second:0n,ms:[]};n=n.slice(1);let[e,r]=n.split("..");return r=r||"0000",t.ms=r.split(".").map((n=>BigInt("0x"+n))),e.split(".").forEach((e=>{switch(e[0]){case"d":t.day+=BigInt(e.slice(1));break;case"h":t.hour+=BigInt(e.slice(1));break;case"m":t.minute+=BigInt(e.slice(1));break;case"s":t.second+=BigInt(e.slice(1));break;default:throw new Error("bad dr: "+n)}})),r=r||"0000",m(t)}Object.defineProperty(exports,"__esModule",{value:!0});const e=BigInt("170141184475152167957503069145530368000"),r=BigInt("18446744073709551616"),a=BigInt("292277024400");function i(n){return n%4n===0n&&n%100n!==0n||n%400n===0n}const o=[31,28,31,30,31,30,31,31,30,31,30,31],f=[31,29,31,30,31,30,31,31,30,31,30,31],u=86400n,s=3600n,c=60n,l=146097n,d=36524n;function m(n){let t=n.second+u*n.day+s*n.hour+c*n.minute,e=n.ms,r=0n,a=3n;for(;0!==e.length;){const[n,...t]=e;r+=n<<16n*a,e=t,a-=1n}return r|t<<64n}function p(n){let t=n>>64n;const e=(BigInt("0xffffffffffffffff")&n).toString(16).padStart(16,"0").match(/.{4}/g).map((n=>BigInt("0x"+n)));for(;0n===e.at(-1);)e.pop();let r=t/u;t%=u;let a=t/s;t%=s;let i=t/c;return t%=c,{ms:e,day:r,minute:i,hour:a,second:t}}const g=(n,t)=>((n,t)=>{const e=Number(0xffn&t),r=Number((0xff00n&t)/256n),a=String.fromCharCode(e)+String.fromCharCode(r);return BigInt(((n,t)=>{let e,r,a,i,o,f,u,s;for(e=3&n.length,r=n.length-e,a=t,o=3432918353,f=461845907,s=0;s<r;)u=255&n.charCodeAt(s)|(255&n.charCodeAt(++s))<<8|(255&n.charCodeAt(++s))<<16|(255&n.charCodeAt(++s))<<24,++s,u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*f+(((u>>>16)*f&65535)<<16)&4294967295,a^=u,a=a<<13|a>>>19,i=5*(65535&a)+((5*(a>>>16)&65535)<<16)&4294967295,a=27492+(65535&i)+((58964+(i>>>16)&65535)<<16);switch(u=0,e){case 3:u^=(255&n.charCodeAt(s+2))<<16;case 2:u^=(255&n.charCodeAt(s+1))<<8;case 1:u^=255&n.charCodeAt(s),u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*f+(((u>>>16)*f&65535)<<16)&4294967295,a^=u}return a^=n.length,a^=a>>>16,a=2246822507*(65535&a)+((2246822507*(a>>>16)&65535)<<16)&4294967295,a^=a>>>13,a=3266489909*(65535&a)+((3266489909*(a>>>16)&65535)<<16)&4294967295,a^=a>>>16,a>>>0})(a,n))})([3077398253,3995603712,2243735041,1261992695][n],t),h=n=>y(4,65535n,65536n,0xffffffffn,g,n),y=(n,t,e,r,a,i)=>{const o=b(n,t,e,a,i);return o<r?o:b(n,t,e,a,o)},b=(n,t,e,r,a)=>{const i=(a,o,f)=>{if(a>n)return n%2!=0||f===t?t*f+o:t*o+f;{const n=BigInt(r(a-1,f).toString());return i(a+1,f,a%2!=0?(o+n)%t:(o+n)%e)}};return i(1,a%t,a/t)},x=n=>w(4,65535n,65536n,0xffffffffn,g,n),w=(n,t,e,r,a,i)=>{const o=B(n,t,e,a,i);return o<r?o:B(n,t,e,a,o)},B=(n,t,e,r,a)=>{const i=(n,a,o)=>{if(n<1)return t*o+a;{const f=r(n-1,a);return i(n-1,n%2!=0?(o+t-f%t)%t:(o+e-f%e)%e,a)}},o=n%2!=0?a/t:a%t,f=n%2!=0?a%t:a/t;return i(n,f===t?o:f,f===t?f:o)};var I={F:g,fe:b,Fe:y,feis:h,fein:n=>{const t=n=>{const e=0xffffffffn&n,r=0xffffffff00000000n&n;return n>=0x10000n&&n<=0xffffffffn?0x10000n+h(n-0x10000n):n>=0x100000000n&&n<=0xffffffffffffffffn?r|t(e):n};return t(n)},fen:B,Fen:w,tail:x,fynd:n=>{const t=n=>{const e=0xffffffffn&n,r=0xffffffff00000000n&n;return n>=0x10000n&&n<=0xffffffffn?0x10000n+x(n-0x10000n):n>=0x100000000n&&n<=0xffffffffffffffffn?r|t(e):n};return t(BigInt(n))}};const v=/^~([a-z]{3}|([a-z]{6}(\-[a-z]{6}){0,3}(\-(\-[a-z]{6}){4})*))$/;function S(n){const t=N(n),e=n=>n.toString(2).padStart(8,"0"),r=t.reduce(((n,r,a)=>a%2!=0||1===t.length?n+e(E.indexOf(r)):n+e(C.indexOf(r))),""),a=BigInt("0b"+r);return I.fynd(a)}function $(n){const t=I.fein(n),e=Math.ceil(t.toString(16).length/2),r=Math.ceil(t.toString(16).length/4);return"~"+(e<=1?E[Number(t)]:function n(t,e,a){const i=0xffffn&t,o=C[Number(i>>8n)],f=E[Number(0xffn&i)];return e===r?a:n(t>>16n,e+1,o+f+(3&e?"-":0===e?"":"--")+a)}(t,0,""))}function A(n){let t;return t="bigint"==typeof n?n:z(n),t<=0xffn?"czar":t<=0xffffn?"king":t<=0xffffffffn?"duke":t<=0xffffffffffffffffn?"earl":"pawn"}function k(n){switch(n){case"czar":return"galaxy";case"king":return"star";case"duke":return"planet";case"earl":return"moon";case"pawn":return"comet"}}function z(n){if(!function(n){return v.test(n)&&j(n)&&n===$(S(n))}(n))throw new Error("invalid @p literal: "+n);return S(n)}const C="\ndozmarbinwansamlitsighidfidlissogdirwacsabwissibrigsoldopmodfoglidhopdardorlorhodfolrintogsilmirholpaslacrovlivdalsatlibtabhanticpidtorbolfosdotlosdilforpilramtirwintadbicdifrocwidbisdasmidloprilnardapmolsanlocnovsitnidtipsicropwitnatpanminritpodmottamtolsavposnapnopsomfinfonbanmorworsipronnorbotwicsocwatdolmagpicdavbidbaltimtasmalligsivtagpadsaldivdactansidfabtarmonranniswolmispallasdismaprabtobrollatlonnodnavfignomnibpagsopralbilhaddocridmocpacravripfaltodtiltinhapmicfanpattaclabmogsimsonpinlomrictapfirhasbosbatpochactidhavsaplindibhosdabbitbarracparloddosbortochilmactomdigfilfasmithobharmighinradmashalraglagfadtopmophabnilnosmilfopfamdatnoldinhatnacrisfotribhocnimlarfitwalrapsarnalmoslandondanladdovrivbacpollaptalpitnambonrostonfodponsovnocsorlavmatmipfip".match(/.{1,3}/g),E="\nzodnecbudwessevpersutletfulpensytdurwepserwylsunrypsyxdyrnuphebpeglupdepdysputlughecryttyvsydnexlunmeplutseppesdelsulpedtemledtulmetwenbynhexfebpyldulhetmevruttylwydtepbesdexsefwycburderneppurrysrebdennutsubpetrulsynregtydsupsemwynrecmegnetsecmulnymtevwebsummutnyxrextebfushepbenmuswyxsymselrucdecwexsyrwetdylmynmesdetbetbeltuxtugmyrpelsyptermebsetdutdegtexsurfeltudnuxruxrenwytnubmedlytdusnebrumtynseglyxpunresredfunrevrefmectedrusbexlebduxrynnumpyxrygryxfeptyrtustyclegnemfermertenlusnussyltecmexpubrymtucfyllepdebbermughuttunbylsudpemdevlurdefbusbeprunmelpexdytbyttyplevmylwedducfurfexnulluclennerlexrupnedlecrydlydfenwelnydhusrelrudneshesfetdesretdunlernyrsebhulrylludremlysfynwerrycsugnysnyllyndyndemluxfedsedbecmunlyrtesmudnytbyrsenwegfyrmurtelreptegpecnelnevfes".match(/.{1,3}/g);function N(n){return n.replace(/[\^~-]/g,"").match(/.{1,3}/g)||[]}function j(n){const t=N(n);return!(t.length%2!=0&&1!==t.length)&&t.every(((n,e)=>e%2!=0||1===t.length?E.includes(n):C.includes(n)))}function _(n,t){let e=[],r=[e];for(let a=0;a<n.length;a++)e.length<t?e.push(n[a]):(e=[n[a]],r.push(e));return r}function q(n,t){return n=M(n),function(n,t,e){if("nan"===n)return function(n,t){return O(BigInt(n+1))<<BigInt(t-1)}(t,e);if("inf"===n)return U(!0,t,e);if("-inf"===n)return U(!1,t,e);let r=0,a=!0;"-"===n[r]&&(a=!1,r++);let i="";for(;"."!==n[r]&&"e"!==n[r]&&void 0!==n[r];)i+=n[r++];"."===n[r]&&r++;let o="";for(;"e"!==n[r]&&void 0!==n[r];)o+=n[r++];"e"===n[r]&&r++;let f=!0;"-"===n[r]&&(f=!1,r++);let u="";for(;void 0!==n[r];)u+=n[r++];return BigInt("0b"+function(n,t,e,r,a,i,o){return 0!==o&&(i?(r+=a.padEnd(o,"0").slice(0,o),a=a.slice(o)):(a=r.padStart(o,"0").slice(-o)+a,r=r.slice(0,-o))),function(n,t,e,r,a,i){function o(n){return console.warn(n),1}const f=2**(t-1)-1,u=1-f,s=f,c=u-n,l=2*f+1+n+3,d=new Array(l),m=10n**a;var p,g,h,y,b,x,w=0,B=!e;for(p=l;p;d[--p]=0);for(p=f+2;r&&p;d[--p]=1n&r,r>>=1n);for(p=f+1;i>0n&&p<l;(d[++p]=(i*=2n)>=m?1:0)&&(i-=m));for(p=-1;++p<l&&!d[p];);if(d[(g=n-1+(p=(w=f+1-p)>=u&&w<=s?p+1:f+1-(w=u-1)))+1]){if(!(h=d[g]))for(y=g+2;!h&&y<l;h=d[y++]);for(y=g+1;h&&--y>=0;(d[y]=(d[y]?0:1)-0)&&(h=0));}for(p=p-2<0?-1:p-3;++p<l&&!d[p];);for((w=f+1-p)>=u&&w<=s?++p:w<u&&(w!=f+1-l&&w<c&&o("r.construct underflow"),p=f+1-(w=u-1)),r&&(o(r?"r.construct overflow":"r.construct"),w=s+1,p=f+2),x=Math.abs(w+f),y=t+1,b="";--y;b=(1&x)+b,x=x>>=1);return(B?"1":"0")+b+d.slice(p,p+n).join("")}(t,n,e,BigInt(r),BigInt(a.length),BigInt(a))}(t,e,a,i,o,f,Number(u)))}(t.slice(n.l.length),n.w,n.p)}function F(n,t){return(n=M(n)).l+function(n){if("n"===n.t)return"nan";if("i"===n.t)return n.s?"inf":"-inf";let t;return n.e-4>0||n.e+2<0?t=1:(t=n.e+1,n.e=0),(n.s?"":"-")+function(n,t){const e=Math.abs(n);if(n<=0)return"0."+"".padEnd(e,"0")+t;{const n=t.length;return e>=n?t+"".padEnd(e-n,"0"):t.slice(0,e)+"."+t.slice(e)}}(t,n.a)+(0===n.e?"":"e"+n.e.toString())}(function(n,t,e){const r=O(e),a=O(t),i=n&r,o=n>>BigInt(e)&a,f=0n===(n>>BigInt(t+e)&1n);let u,s,c,l;if(o===a)return 0n===i?{t:"i",s:f}:{t:"n"};0n!==o?(u=1n<<BigInt(e)|i,s=o-(2n**(t-1n)-1n)-e,c=Number(e),l=1n!==o&&0n===i):(u=i,s=1n-(2n**(t-1n)-1n)-e,c=u.toString(2).length-1,l=!1);const d=(2n**e).toString(10).length+1,m=function(n,t,e,r,a,i,o){const f=BigInt(t);let u,s,c,l,d=0,m=new Array(o).fill("0"),p=0;if(0n===n)return m[0]="0",p=0,{digits:m.slice(0,1).join(""),outExponent:p};r?t>0?(s=4n*n,s<<=f,u=4n,c=1n<<f,l=1n<<f+1n):(s=4n*n,u=1n<<-f+2n,c=1n,l=2n):t>0?(s=2n*n,s<<=f,u=2n,c=1n<<f,l=c):(s=2n*n,u=1n<<BigInt(1-t),c=1n,l=c);let g=Math.ceil(.3010299956639812*(e+t)-.69);if(g>0)u*=BigInt(10)**BigInt(g);else if(g<0){const n=BigInt(10)**BigInt(-g);s*=n,c*=n,l!==c&&(l*=c)}s>=u?g+=1:(s*=10n,c*=10n,l!==c&&(l*=10n));let h=g-o;p=g-1;let y=!1,b=!1,x=0;for(;g-=1,x=Number(s/u),s%=u,y=s<c,b=s+l>u,!y&&!b&&g!==h;)m[d]=String.fromCharCode("0".charCodeAt(0)+x),d+=1,s*=10n,c*=10n,l!==c&&(l*=10n);let w=y;if(y===b){s*=2n;let n=s<u?-1:s>u?1:0;w=n<0,0===n&&(w=0==(1&x))}if(w)m[d]=String.fromCharCode("0".charCodeAt(0)+x),d+=1;else if(9===x)for(;;){if(0===d){m[d]="1",d+=1,p+=1;break}if(d-=1,"9"!==m[d]){m[d]=String.fromCharCode(m[d].charCodeAt(0)+1),d+=1;break}}else m[d]=String.fromCharCode("0".charCodeAt(0)+x+1),d+=1;return{digits:m.slice(0,d).join(""),outExponent:p}}(u,Number(s),c,l,0,0,d);return{t:"d",s:f,e:m.outExponent,a:m.digits}}(t,BigInt(n.w),BigInt(n.p)))}function M(n){return"h"===n?{w:5,p:10,l:".~~"}:"s"===n?{w:8,p:23,l:"."}:"d"===n?{w:11,p:52,l:".~"}:"q"===n?{w:15,p:112,l:".~~~"}:n}function O(n){return 2n**n-1n}function U(n,t,e){return O(BigInt(n?t:t+1))<<BigInt(e)}function Z(n,t,e,r,a){return void 0===a&&(a=!1),new RegExp(`^${a?"\\-\\-?":""}${n}(0|${0===r?t:`${t}${e}{0,${r-1}}`}${0===r?`${e}*`:`(\\.${e}{${r}})*`})$`)}function P(n){return new RegExp(`^\\.~{${n}}(nan|\\-?(inf|(0|[1-9][0-9]*)(\\.[0-9]+)?(e\\-?(0|[1-9][0-9]*))?))$`)}const R={c:/^~\-((~[0-9a-fA-F]+\.)|(~[~\.])|[0-9a-z\-\._])*$/,da:/^~(0|[1-9][0-9]*)\-?\.0*([1-9]|1[0-2])\.0*[1-9][0-9]*(\.\.([0-9]+)\.([0-9]+)\.([0-9]+)(\.(\.[0-9a-f]{4})+)?)?$/,dr:/^~((d|h|m|s)(0|[1-9][0-9]*))(\.(d|h|m|s)(0|[1-9][0-9]*))*(\.(\.[0-9a-f]{4})+)?$/,f:/^\.(y|n)$/,if:/^(\.(0|[1-9][0-9]{0,2})){4}$/,is:/^(\.(0|[1-9a-fA-F][0-9a-fA-F]{0,3})){8}$/,n:/^~$/,p:v,q:/^\.~(([a-z]{3}|[a-z]{6})(\-[a-z]{6})*)$/,rd:P(1),rh:P(2),rq:P(3),rs:P(0),sb:Z("0b","1","[01]",4,!0),sd:Z("","[1-9]","[0-9]",3,!0),si:Z("0i","[1-9]","[0-9]",0,!0),sv:Z("0v","[1-9a-v]","[0-9a-v]",5,!0),sw:Z("0w","[1-9a-zA-Z~-]","[0-9a-zA-Z~-]",5,!0),sx:Z("0x","[1-9a-f]","[0-9a-f]",4,!0),t:/^~~((~[0-9a-fA-F]+\.)|(~[~\.])|[0-9a-z\-\._])*$/,ta:/^~\.[0-9a-z\-\.~_]*$/,tas:/^[a-z][a-z0-9\-]*$/,ub:Z("0b","1","[01]",4),ud:Z("","[1-9]","[0-9]",3),ui:Z("0i","[1-9]","[0-9]",0),uv:Z("0v","[1-9a-v]","[0-9a-v]",5),uw:Z("0w","[1-9a-zA-Z~-]","[0-9a-zA-Z~-]",5),ux:Z("0x","[1-9a-f]","[0-9a-f]",4)},T=D;function D(n,t){const e=H(n,t);if(!e)throw new Error("slav: failed to parse @"+n+" from string: "+t);return e}const G=H;function H(n,t){if(n in R&&!R[n].test(t))return null;const e=J(t);return e&&"dime"===e.type&&e.aura===n?e.atom:null}function J(e){if(""===e)return null;const r=e[0];if(r>="a"&&r<="z")return R.tas.test(e)?{type:"dime",aura:"tas",atom:Q(e)}:null;if(r>="0"&&r<="9"){const n=K(e);return n?{type:"dime",...n}:null}if("-"===r){let n=!0;"-"==e[1]?e=e.slice(2):(e=e.slice(1),n=!1);const t=K(e);return t?(n?t.atom=2n*t.atom:0n!==t.atom&&(t.atom=1n+2n*(t.atom-1n)),{type:"dime",aura:t.aura.replace("u","s"),atom:t.atom}):null}if("."===r){if(".y"===e)return{type:"dime",aura:"f",atom:0n};if(".n"===e)return{type:"dime",aura:"f",atom:1n};if(R.is.test(e)){const n=e.slice(1).split(".").reduce(((n,t)=>n+t.padStart(4,"0")),"");return{type:"dime",aura:"is",atom:BigInt("0x"+n)}}if(R.if.test(e))return{type:"dime",aura:"if",atom:e.slice(1).split(".").reduce(((n,t,e)=>n+(BigInt(t)<<BigInt(8*(3-e)))),0n)};if("~"===e[1]&&(R.rd.test(e)||R.rh.test(e)||R.rq.test(e))||R.rs.test(e)){let n,t=0;for(;"~"===e[t+1];)t++;switch(t){case 0:n="rs";break;case 1:n="rd";break;case 2:n="rh";break;case 3:n="rq";break;default:throw new Error("parsing invalid @r*")}return{type:"dime",aura:n,atom:q(n[1],e)}}if("~"===e[1]&&R.q.test(e)){const n=function(n){try{const t=function(n){const t=n.slice(2).split("-"),e=n=>{if(n<0)throw new Error("malformed @q");return n.toString(16).padStart(2,"0")},r=t.map(((n,t)=>{let r=function(n,t){return[t.slice(0,3),t.slice(3)]}(0,n);return""===r[1]&&0===t?e(E.indexOf(r[0])):e(C.indexOf(r[0]))+e(E.indexOf(r[1]))}));return BigInt("0x"+(0===n.length?"00":r.join("")))}(n);return t}catch(n){return null}}(e);return null===n?null:{type:"dime",aura:"q",atom:n}}if("_"===e[1]&&/^\.(_([0-9a-zA-Z\-\.]|~\-|~~)+)*__$/.test(e)){const n=e.slice(1,-2).split("_").slice(1).map((n=>J(n=n.replaceAll("~-","_").replaceAll("~~","~"))));return n.some((n=>null===n))?null:{type:"many",list:n}}return null}if("~"===r){if("~"===e)return{type:"dime",aura:"n",atom:0n};if(R.da.test(e))return{type:"dime",aura:"da",atom:n(e)};if(R.dr.test(e))return{type:"dime",aura:"dr",atom:t(e)};if(R.p.test(e)){const n=function(n){if(!v.test(n)||!j(n))return null;const t=S(n);return n===$(t)?t:null}(e);return null===n?null:{type:"dime",aura:"p",atom:n}}return"."===e[1]&&R.ta.test(e)?{type:"dime",aura:"ta",atom:Q(e.slice(2))}:"~"===e[1]&&R.t.test(e)?{type:"dime",aura:"t",atom:Q(L(e.slice(2)))}:"-"===e[1]&&R.c.test(e)?/^~\-~[0-9a-f]+\.$/.test(e)?{type:"dime",aura:"c",atom:BigInt("0x"+e.slice(3,-1))}:{type:"dime",aura:"c",atom:Q(L(e.slice(2)))}:"0"===e[1]&&/^~0[0-9a-v]+$/.test(e)?{type:"blob",jam:X(5,W,e.slice(2))}:null}return null}function K(n){switch(n.slice(0,2)){case"0b":return R.ub.test(n)?{aura:"ub",atom:BigInt(n.replaceAll(".",""))}:null;case"0c":return console.log("aura-js: @uc parsing unsupported (bisk)"),null;case"0i":return R.ui.test(n)?{aura:"ui",atom:BigInt(n.slice(2))}:null;case"0x":return R.ux.test(n)?{aura:"ux",atom:BigInt(n.replaceAll(".",""))}:null;case"0v":return R.uv.test(n)?{aura:"uv",atom:X(5,W,n.slice(2))}:null;case"0w":return R.uw.test(n)?{aura:"uw",atom:X(6,V,n.slice(2))}:null;default:return R.ud.test(n)?{aura:"ud",atom:BigInt(n.replaceAll(".",""))}:null}}function L(n){let t="",e=0;for(;e<n.length;)switch(n[e]){case".":t+=" ",e++;continue;case"~":switch(n[++e]){case"~":t+="~",e++;continue;case".":t+=".",e++;continue;default:let r=0;do{r=r<<4|Number.parseInt(n[e++],16)}while("."!==n[e]);t+=String.fromCodePoint(r),e++;continue}default:t+=n[e++];continue}return t}function Q(n){return function(n){if(0===n.length)return 0n;if("undefined"!=typeof Buffer)return BigInt("0x"+Buffer.from(n.reverse()).toString("hex"));let t,e=[];for(var r=n.length-1;r>=0;--r)t=n[r],e.push(t<16?"0"+t.toString(16):t.toString(16));return BigInt("0x"+e.join(""))}((new TextEncoder).encode(n))}const V="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-~",W="0123456789abcdefghijklmnopqrstuv";function X(n,t,e){let r=0n;const a=BigInt(n);for(;""!==e;)"."!==e[0]&&(r=(r<<a)+BigInt(t.indexOf(e[0]))),e=e.slice(1);return r}const Y=nn;function nn(n,t){return tn({type:"dime",aura:n,atom:t})}function tn(n){switch(n.type){case"blob":return"~0"+n.jam.toString(32);case"many":return"."+n.list.reduce(((n,t)=>n+"_"+tn(t).replaceAll("~","~~").replaceAll("_","~-")),"")+"__";case"dime":switch(n.aura[0]){case"c":return n.atom<0x7fn?"~-"+rn(String.fromCharCode(Number(n.atom))):"~-~"+n.atom.toString(16)+".";case"d":switch(n.aura[1]){case"a":return function(n){const{pos:t,year:e,month:r,time:i}=function(n){const t=p(n),[e,r,i]=function(n){let t=0n,e=0n,r=!1;t=n/l,(n%=l)<d+1n?r=!0:(r=!1,e=1n,e+=(n-=d+1n)/d,n%=d);let a=400n*t+100n*e,i=!0;for(;1==i;){let t=r?366n:365n;if(n<t){i=!1;let t=!0,e=0n;for(;t;){let t=BigInt((r?f:o)[Number(e)]);if(n<t)return[a,e+1n,n+1n];e+=1n,n-=t}}else a+=1n,n-=t,r=a%4n===0n}return[0n,0n,0n]}(t.day);t.day=i;const u=e>a;return{pos:u,year:u?e-a:a+1n-e,month:r,time:t}}(n);let u=`~${e}${t?"":"-"}.${r}.${i.day}`;return 0n===i.hour&&0n===i.minute&&0n===i.second&&0===i.ms.length||(u+=`..${i.hour.toString().padStart(2,"0")}.${i.minute.toString().padStart(2,"0")}.${i.second.toString().padStart(2,"0")}`,0!==i.ms.length&&(u+=`..${i.ms.map((n=>n.toString(16).padStart(4,"0"))).join(".")}`)),u}(n.atom);case"r":return function(n){if(0n===n)return"~s0";const{day:t,hour:e,minute:r,second:a,ms:i}=p(n);let o=[];return 0n!==t&&o.push("d"+t.toString()),0n!==e&&o.push("h"+e.toString()),0n!==r&&o.push("m"+r.toString()),0n!==a&&o.push("s"+a.toString()),0!==i.length&&(0===o.length&&o.push("s0"),o.push("."+i.map((n=>n.toString(16).padStart(4,"0"))).join("."))),"~"+o.join(".")}(n.atom);default:return en(n.atom)}case"f":switch(n.atom){case 0n:return".y";case 1n:return".n";default:return en(n.atom)}case"n":return"~";case"i":switch(n.aura[1]){case"f":return"."+fn(n.atom,1,4,10);case"s":return"."+fn(n.atom,2,8,16);default:return en(n.atom)}case"p":return $(n.atom);case"q":return function(n){const t=n.toString(16),e=t.length,r=Buffer.from(t.padStart(e+e%2,"0"),"hex"),a=r.length%2!=0&&r.length>1?[[r[0]]].concat(_(Array.from(r.slice(1)),2)):_(Array.from(r),2);return a.reduce(((n,t)=>{return n+(".~"===n?"":"-")+((e=t).length%2!=0&&a.length>1?void 0===(r=e)[1]?E[r[0]]:C[r[0]]+E[r[1]]:(n=>void 0===n[1]?E[n[0]]:C[n[0]]+E[n[1]])(e));var e,r}),".~")}(n.atom);case"r":switch(n.aura[1]){case"d":return F("d",n.atom);case"h":return F("h",n.atom);case"q":return F("q",n.atom);case"s":return F("s",n.atom);default:return en(n.atom)}case"u":switch(n.aura[1]){case"c":throw new Error("aura-js: @uc rendering unsupported");case"b":return"0b"+on(n.atom.toString(2),4);case"i":return"0i"+n.atom.toString(10).padStart(1,"0");case"x":return"0x"+on(n.atom.toString(16),4);case"v":return"0v"+on(n.atom.toString(32),5);case"w":return"0w"+on(function(n,t,e){if(0n===e)return t[0];let r="";const a=BigInt(6);for(;0n!==e;)r=t[Number(BigInt.asUintN(6,e))]+r,e>>=a;return r}(0,an,n.atom),5);default:return on(n.atom.toString(10),3)}case"s":const t=1n&n.atom;return n.atom=t+(n.atom>>1n),n.aura=n.aura.replace("s","u"),(0n===t?"--":"-")+tn(n);case"t":return"a"===n.aura[1]?"s"===n.aura[2]?un(n.atom):"~."+un(n.atom):"~~"+rn(un(n.atom));default:return en(n.atom)}}}function en(n){return"0x"+function(n,t){return t.toString(16).padStart(1,"0")}(0,n)}function rn(n){let t="";for(let e=0;e<n.length;e+=1){const r=n[e];let a="";switch(r){case" ":a=".";break;case".":a="~.";break;case"~":a="~~";break;default:{const t=n.codePointAt(e);if(!t)break;t>65535&&(e+=1),a=t>=97&&t<=122||t>=48&&t<=57||"-"===r?r:`~${t.toString(16)}.`}}t+=a}return t}const an="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-~";function on(n,t){return n.replace(new RegExp(`(?=(?:.{${t}})+$)(?!^)`,"g"),".")}function fn(n,t,e,r){void 0===r&&(r=10);let a="";const i=8n*BigInt(t),o=(1n<<i)-1n;for(;e-- >0;)""!==a&&(a="."+a),a=(n&o).toString(r)+a,n>>=i;return a}function un(n){return new TextDecoder("utf-8").decode(function(n){if(0n===n)return new Uint8Array(0);const t=n.toString(16),e=t.length%2==0?t:"0"+t,r=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const t=e.slice(n,n+2),a=parseInt(t,16)<<24>>24;r[n/2]=a}return r}(n).reverse())}const sn={toSeconds:function(n){const{day:t,hour:e,minute:r,second:a}=p(n);return 60n*(60n*(24n*t+e)+r)+a},fromSeconds:function(n){return m({day:0n,hour:0n,minute:0n,second:n,ms:[]})}},cn={cite:function(n){let t;return t="bigint"==typeof n?n:z(n),t<=0xffffffffn?$(t):t<=0xffffffffffffffffn?$(0xffffffffn&t).replace("-","^"):$(BigInt("0x"+t.toString(16).slice(0,4)))+"_"+$(0xffffn&t).slice(1)},sein:function(n){let t;t="bigint"==typeof n?n:z(n);let e=A(t);const r="czar"===e?t:"king"===e?0xffn&t:"duke"===e?0xffffn&t:"earl"===e?0xffffffffn&t:0xffffn&t;return"bigint"==typeof n?r:$(r)},clan:A,kind:function(n){return k(A(n))},rankToSize:k,sizeToRank:function(n){switch(n){case"galaxy":return"czar";case"star":return"king";case"planet":return"duke";case"moon":return"earl";case"comet":return"pawn"}}};exports.da={toUnix:function(n){return Math.round(Number(1000n*(r/2000n+(n-e))/r))},fromUnix:function(n){const t=BigInt(n)*r/1000n;return e+t}},exports.dr=sn,exports.nuck=J,exports.p=cn,exports.parse=T,exports.rend=tn,exports.render=Y,exports.scot=nn,exports.slav=D,exports.slaw=H,exports.tryParse=G,exports.valid=function(n,t){return null!==H(n,t)};
//# sourceMappingURL=aura.cjs.production.min.js.map
