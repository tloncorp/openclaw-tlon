{"version":3,"file":"aura.cjs.development.js","sources":["../src/d.ts","../src/hoon/muk.ts","../src/hoon/ob.ts","../src/p.ts","../src/q.ts","../src/r.ts","../src/parse.ts","../src/render.ts","../src/index.ts"],"sourcesContent":["/**\n * Given a string formatted as a `@da`, returns a bigint representing the urbit date.\n *\n * @param   {string}  x  The formatted `@da`\n * @return  {bigint}     The urbit date as bigint\n */\nexport function parseDa(x: string): bigint {\n  let pos = true;\n  let [date, time, ms] = x.split('..');\n  time = time || '0.0.0';\n  ms = ms || '0000';\n  let [yer, month, day] = date.slice(1).split('.');\n  if (yer.at(-1) === '-') {\n    yer = yer.slice(0, -1);\n    pos = false;\n  }\n  const [hour, minute, sec] = time.split('.');\n  const millis = ms.split('.').map((m) => BigInt('0x' + m));\n\n  return year({\n    pos: pos,\n    year: BigInt(yer),\n    month: BigInt(month),\n    time: {\n      day: BigInt(day),\n      hour: BigInt(hour),\n      minute: BigInt(minute),\n      second: BigInt(sec),\n      ms: millis,\n    },\n  });\n}\n\nexport function parseDr(x: string): bigint {\n  const rop: Tarp = { day: 0n, hour: 0n, minute: 0n, second: 0n, ms: [] };\n  x = x.slice(1);  //  strip ~\n  let [time, ms] = x.split('..');\n  ms = ms || '0000';\n  rop.ms = ms.split('.').map((m) => BigInt('0x' + m));\n  time.split('.').forEach((a) => {\n    switch (a[0]) {\n      case 'd': rop.day    += BigInt(a.slice(1)); break;\n      case 'h': rop.hour   += BigInt(a.slice(1)); break;\n      case 'm': rop.minute += BigInt(a.slice(1)); break;\n      case 's': rop.second += BigInt(a.slice(1)); break;\n      default: throw new Error('bad dr: ' + x);\n    }\n  });\n  ms = ms || '0000';\n  return yule(rop);\n}\n\n/**\n * Given a bigint representing an urbit date, returns a string formatted as a proper `@da`.\n *\n * @param   {bigint}  x  The urbit date as bigint\n * @return  {string}     The formatted `@da`\n */\nexport function renderDa(x: bigint): string {\n  const { pos, year, month, time } = yore(x);\n  let out = `~${year}${pos ? '' : '-'}.${month}.${time.day}`;\n  if (time.hour !== 0n || time.minute !== 0n || time.second !== 0n || time.ms.length !== 0) {\n    out = out + `..${time.hour.toString().padStart(2, '0')}.${time.minute.toString().padStart(2, '0')}.${time.second.toString().padStart(2, '0')}`\n    if (time.ms.length !== 0) {\n      out = out + `..${time.ms.map((x) => x.toString(16).padStart(4, '0')).join('.')}`;\n    }\n  }\n  return out;\n}\n\nexport function renderDr(x: bigint): string {\n  if (x === 0n) return '~s0';\n  const { day, hour, minute, second, ms } = yell(x);\n  let out: string[] = [];\n  if (day    !== 0n) out.push('d' + day.toString());\n  if (hour   !== 0n) out.push('h' + hour.toString());\n  if (minute !== 0n) out.push('m' + minute.toString());\n  if (second !== 0n) out.push('s' + second.toString());\n  if (ms.length !== 0) {\n    if (out.length === 0) out.push('s0');\n    out.push('.' + ms.map((x) => x.toString(16).padStart(4, '0')).join('.'));\n  }\n  return '~' + out.join('.');\n}\n\n/**\n * Given a bigint representing an urbit date, returns a unix timestamp.\n *\n * @param   {bigint}  da  The urbit date\n * @return  {number}      The unix timestamp\n */\nexport function toUnix(da: bigint): number {\n  // ported from +time:enjs:format in hoon.hoon\n  const offset = DA_SECOND / 2000n;\n  const epochAdjusted = offset + (da - DA_UNIX_EPOCH);\n\n  return Math.round(\n    Number(epochAdjusted * 1000n / DA_SECOND)\n  );\n}\n\n/**\n * Given a unix timestamp, returns a bigint representing an urbit date\n *\n * @param   {number}  unix  The unix timestamp\n * @return  {bigint}        The urbit date\n */\nexport function fromUnix(unix: number): bigint {\n  const timeSinceEpoch = BigInt(unix) * DA_SECOND / 1000n;\n  return DA_UNIX_EPOCH + timeSinceEpoch;\n}\n\n/**\n * Given a number of seconds, return a bigint representing its `@dr`\n */\nexport function fromSeconds(seconds: bigint): bigint {\n  return yule({ day: 0n, hour: 0n, minute: 0n, second: seconds, ms: [] });\n}\n\n/**\n * Convert a `@dr` to the amount of seconds it represents, dropping sub-\n * second precision\n */\nexport function toSeconds(dr: bigint): bigint {\n  const { day, hour, minute, second } = yell(dr);\n  return (((((day * 24n) + hour) * 60n) + minute) * 60n) + second;\n}\n\n//\n//  internals\n//\n\ninterface Dat {\n  pos: boolean;\n  year: bigint;\n  month: bigint;\n  time: Tarp;\n}\n\ninterface Tarp {\n  day: bigint;\n  hour: bigint;\n  minute: bigint;\n  second: bigint;\n  ms: bigint[];\n}\n\nconst DA_UNIX_EPOCH = BigInt('170141184475152167957503069145530368000'); // `@ud` ~1970.1.1\n\nconst DA_SECOND = BigInt('18446744073709551616'); // `@ud` ~s1\n\nconst EPOCH = BigInt('292277024400');\n\nfunction isLeapYear(year: bigint) {\n  return (year % 4n) === 0n\n      && (year % 100n) !== 0n\n      || (year % 400n) === 0n;\n}\nconst MOH_YO = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nconst MOY_YO = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nconst DAY_YO = 86400n;\nconst HOR_YO = 3600n;\nconst MIT_YO = 60n;\nconst ERA_YO = 146097n;\nconst CET_YO = 36524n;\n\nfunction year(det: Dat) {\n  const yer = det.pos\n    ? EPOCH + (BigInt(det.year))\n    : EPOCH - (BigInt(det.year) - 1n);\n  const day = (() => {\n    let cah = isLeapYear(yer) ? MOY_YO : MOH_YO;\n    let d = det.time.day - 1n;\n    let m = det.month - 1n;\n    while (m !== 0n) {\n      const [first, ...rest] = cah;\n      d = d + BigInt(first);\n      m = m - 1n;\n      cah = rest;\n    }\n    let loop: boolean = true;\n    let y = yer;\n    while (loop == true) {\n      if ((y % 4n) !== 0n) {\n        y = y - 1n;\n        d = d + (isLeapYear(y) ? 366n : 365n);\n      } else if ((y % 100n) !== 0n) {\n        y = y - 4n;\n        d = d + (isLeapYear(y) ? 1461n : 1460n);\n      } else if ((y % 400n) !== 0n) {\n        y = y - 100n;\n        d = d + (isLeapYear(y) ? 36525n : 36524n);\n      } else {\n        let eras = y / 400n;\n        d = d + (eras * (4n * 36524n + 1n));\n        loop = false;\n      }\n    }\n    return d;\n  })();\n\n  det.time.day = day;\n  return yule(det.time);\n}\n\nfunction yule(rip: Tarp): bigint {\n  let sec = rip.second\n    + (DAY_YO * rip.day)\n    + (HOR_YO * rip.hour)\n    + (MIT_YO * rip.minute);\n\n  let ms = rip.ms;\n  let fac = 0n;\n  let muc = 3n;\n  while (ms.length !== 0) {\n    const [first, ...rest] = ms;\n    fac = fac + (first << (16n * muc));\n    ms = rest;\n    muc -= 1n;\n  }\n\n  return fac | (sec << 64n);\n}\n\nfunction yell(x: bigint): Tarp {\n  let sec = x >> 64n;\n  const milliMask = BigInt('0xffffffffffffffff');\n  const millis = milliMask & x;\n  const ms = millis\n    .toString(16).padStart(16, '0')\n    .match(/.{4}/g)!\n    .map((x) => BigInt('0x'+x));\n  while (ms.at(-1) === 0n) {\n    ms.pop();\n  }\n  let day = sec / DAY_YO;\n  sec = sec % DAY_YO;\n  let hor = sec / HOR_YO;\n  sec = sec % HOR_YO;\n  let mit = sec / MIT_YO;\n  sec = sec % MIT_YO;\n\n  return {\n    ms,\n    day,\n    minute: mit,\n    hour: hor,\n    second: sec,\n  };\n}\n\nfunction yall(day: bigint): [bigint, bigint, bigint] {\n  let era = 0n;\n  let cet = 0n;\n  let lep = false;\n  era = day / ERA_YO;\n  day = day % ERA_YO;\n  if (day < (CET_YO + 1n)) {\n    lep = true;\n  } else {\n    lep = false;\n    cet = 1n;\n    day = day - (CET_YO + 1n);\n    cet = cet + (day / CET_YO);\n    day = day % CET_YO;\n  }\n  let yer = (era * 400n) + (cet * 100n);\n  let loop = true;\n  while (loop == true) {\n    let dis = lep ? 366n : 365n;\n    if (!(day < dis)) {\n      yer = yer + 1n;\n      day = day - dis;\n      lep = (yer % 4n) === 0n;\n    } else {\n      loop = false;\n      let inner = true;\n      let mot = 0n;\n      while (inner) {\n        let cah = lep ? MOY_YO : MOH_YO;\n        let zis = BigInt(cah[Number(mot)]);\n        if (day < zis) {\n          return [yer, mot + 1n, day + 1n];\n        }\n        mot = mot + 1n;\n        day = day - zis;\n      }\n    }\n  }\n  return [0n, 0n, 0n];\n}\n\nfunction yore(x: bigint): Dat {\n  const time = yell(x);\n  const [y, month, d] = yall(time.day);\n  time.day = d;\n  const pos = y > EPOCH;\n  const year = pos ? y - EPOCH : EPOCH + 1n - y;\n\n  return {\n    pos,\n    year,\n    month,\n    time,\n  };\n}\n","// ++  muk\n//\n// See arvo/sys/hoon.hoon.\n\n/**\n * Standard murmur3.\n *\n * @param  {Number}       syd\n * @param  {Number}       len\n * @param  {bigint}       key\n * @return {bigint}\n */\nexport const muk = (syd: number, key: bigint): bigint => {\n  const lo = Number(key & 0xffn);\n  const hi = Number((key & 0xff00n) / 256n);\n  const kee = String.fromCharCode(lo) + String.fromCharCode(hi);\n  return BigInt(murmurhash3_32_gc(kee, syd));\n};\n\n// see: https://github.com/garycourt/murmurhash-js\n//\n// Copyright (c) 2011 Gary Court\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy of\n// this software and associated documentation files (the \"Software\"), to deal in\n// the Software without restriction, including without limitation the rights to\n// use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\n// of the Software, and to permit persons to whom the Software is furnished to do\n// so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\n\n/**\n * JS Implementation of MurmurHash3 (r136) (as of May 20, 2011)\n *\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/murmurhash-js\n * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\n * @see http://sites.google.com/site/murmurhash/\n *\n * @param {string} key ASCII only\n * @param {number} seed Positive integer only\n * @return {number} 32-bit positive integer hash\n **/\nconst murmurhash3_32_gc = (key: string, seed: number) => {\n  let remainder, bytes, h1, h1b, c1, c2, k1, i; // c1b, c2b unused\n\n  remainder = key.length & 3; // key.length % 4\n  bytes = key.length - remainder;\n  h1 = seed;\n  c1 = 0xcc9e2d51;\n  c2 = 0x1b873593;\n  i = 0;\n\n  while (i < bytes) {\n    k1 =\n      (key.charCodeAt(i) & 0xff) |\n      ((key.charCodeAt(++i) & 0xff) << 8) |\n      ((key.charCodeAt(++i) & 0xff) << 16) |\n      ((key.charCodeAt(++i) & 0xff) << 24);\n    ++i;\n\n    k1 =\n      ((k1 & 0xffff) * c1 + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;\n    k1 = (k1 << 15) | (k1 >>> 17);\n    k1 =\n      ((k1 & 0xffff) * c2 + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;\n\n    h1 ^= k1;\n    h1 = (h1 << 13) | (h1 >>> 19);\n    h1b =\n      ((h1 & 0xffff) * 5 + ((((h1 >>> 16) * 5) & 0xffff) << 16)) & 0xffffffff;\n    h1 = (h1b & 0xffff) + 0x6b64 + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16);\n  }\n\n  k1 = 0;\n\n  switch (remainder) {\n    case 3:\n      k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;\n    case 2:\n      k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;\n    case 1:\n      k1 ^= key.charCodeAt(i) & 0xff;\n\n      k1 =\n        ((k1 & 0xffff) * c1 + ((((k1 >>> 16) * c1) & 0xffff) << 16)) &\n        0xffffffff;\n      k1 = (k1 << 15) | (k1 >>> 17);\n      k1 =\n        ((k1 & 0xffff) * c2 + ((((k1 >>> 16) * c2) & 0xffff) << 16)) &\n        0xffffffff;\n      h1 ^= k1;\n  }\n\n  h1 ^= key.length;\n\n  h1 ^= h1 >>> 16;\n  h1 =\n    ((h1 & 0xffff) * 0x85ebca6b +\n      ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) &\n    0xffffffff;\n  h1 ^= h1 >>> 13;\n  h1 =\n    ((h1 & 0xffff) * 0xc2b2ae35 +\n      ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16)) &\n    0xffffffff;\n  h1 ^= h1 >>> 16;\n\n  return h1 >>> 0;\n};\n","import { muk } from './muk';\n\n// ++  ob\n//\n// See arvo/sys/hoon.hoon.\n\n// a PRF for j in { 0, .., 3 }\nconst F = (j: number, arg: bigint): bigint => {\n  const raku = [0xb76d5eed, 0xee281300, 0x85bcae01, 0x4b387af7];\n\n  return muk(raku[j], arg);\n};\n\n/**\n * Conceal structure v3.\n *\n * @param {String, Number, bigint} pyn\n * @return  {bigint}\n */\nconst fein = (arg: bigint): bigint => {\n  const loop = (pyn: bigint): bigint => {\n    const lo = pyn & 0xffffffffn;\n    const hi = pyn & 0xffffffff00000000n;\n\n    return (pyn >= 0x10000n) && (pyn <= 0xffffffffn)\n      ? (0x10000n + feis(pyn - 0x10000n))\n      : (pyn >= 0x100000000n) && (pyn <= 0xffffffffffffffffn)\n      ? (hi | loop(lo))\n      : pyn;\n  };\n\n  return loop(arg);\n};\n\n/**\n * Restore structure v3.\n *\n * @param  {String, Number, bigint}  cry\n * @return  {bigint}\n */\nconst fynd = (arg: bigint): bigint => {\n  const loop = (cry: bigint): bigint => {\n    const lo = cry & 0xffffffffn;\n    const hi = cry & 0xffffffff00000000n;\n\n    return (cry >= 0x10000n) && (cry <= 0xffffffffn)\n      ? (0x10000n + tail(cry - 0x10000n))\n      : (cry >= 0x100000000n) && (cry <= 0xffffffffffffffffn)\n      ? (hi | loop(lo))\n      : cry;\n  };\n\n  return loop(BigInt(arg));\n};\n\n/**\n * Generalised Feistel cipher.\n *\n * See: Black and Rogaway (2002), \"Ciphers with arbitrary finite domains.\"\n *\n * Note that this has been adjusted from the reference paper in order to\n * support some legacy behaviour.\n *\n * @param  {String, Number, bigint}\n * @return  {BN}\n */\nconst feis = (arg: bigint) =>\n  Fe(4, 65535n, 65536n, 0xffffffffn, F, arg);\n\nconst Fe = (\n  r: number,\n  a: bigint,\n  b: bigint,\n  k: bigint,\n  f: typeof F,\n  m: bigint\n) => {\n  const c = fe(r, a, b, f, m);\n  return (c < k) ? c : fe(r, a, b, f, c);\n};\n\nconst fe = (\n  r: number,\n  a: bigint,\n  b: bigint,\n  f: typeof F,\n  m: bigint\n) => {\n  const loop = (j: number, ell: bigint, arr: bigint): bigint => {\n    if (j > r) {\n      return r % 2 !== 0\n        ? (a * arr) + ell\n        : arr === a\n        ? (a * arr) + ell\n        : (a * ell) + arr;\n    } else {\n      const eff = BigInt(f(j - 1, arr).toString());\n\n      const tmp = j % 2 !== 0 ? ((ell + eff) % a) : ((ell + eff) % b);\n\n      return loop(j + 1, arr, tmp);\n    }\n  };\n\n  const L = m % a;\n  const R = m / a;\n\n  return loop(1, L, R);\n};\n\n/**\n * Reverse 'feis'.\n *\n * See: Black and Rogaway (2002), \"Ciphers with arbitrary finite domains.\"\n *\n * Note that this has been adjusted from the reference paper in order to\n * support some legacy behaviour.\n *\n * @param {bigint}  arg\n * @return  {bigint}\n */\nconst tail = (arg: bigint) =>\n  Fen(4, 65535n, 65536n, 0xffffffffn, F, arg);\n\nconst Fen: typeof Fe = (r, a, b, k, f, m) => {\n  const c = fen(r, a, b, f, m);\n  return (c < k) ? c : fen(r, a, b, f, c);\n};\n\nconst fen: typeof fe = (r, a, b, f, m) => {\n  const loop = (j: number, ell: bigint, arr: bigint): bigint => {\n    if (j < 1) {\n      return (a * arr) + ell;\n    } else {\n      const eff = f(j - 1, ell);\n\n      // NB (jtobin):\n      //\n      // Slight deviation from B&R (2002) here to prevent negative values.  We\n      // add 'a' or 'b' to arr as appropriate and reduce 'eff' modulo the same\n      // number before performing subtraction.\n      //\n      const tmp =\n        j % 2 !== 0\n          ? ((arr + a) - (eff % a)) % a\n          : ((arr + b) - (eff % b)) % b;\n\n      return loop(j - 1, tmp, ell);\n    }\n  };\n\n  const ahh = r % 2 !== 0 ? (m / a) : (m % a);\n\n  const ale = r % 2 !== 0 ? (m % a) : (m / a);\n\n  const L = ale === a ? ahh : ale;\n\n  const R = ale === a ? ale : ahh;\n\n  return loop(r, L, R);\n};\n\nexport default {\n  F,\n\n  fe,\n  Fe,\n  feis,\n  fein,\n\n  fen,\n  Fen,\n  tail,\n  fynd,\n};\n","import ob from './hoon/ob';\n\nexport type rank = 'czar'   | 'king' | 'duke'   | 'earl' | 'pawn';\nexport type size = 'galaxy' | 'star' | 'planet' | 'moon' | 'comet';\n\n//\n//  main parsing & rendering\n//\n\n//NOTE  matches for shape, not syllables\nexport const regexP = /^~([a-z]{3}|([a-z]{6}(\\-[a-z]{6}){0,3}(\\-(\\-[a-z]{6}){4})*))$/;\n\n/**\n * Convert a valid `@p` literal string to a bigint.\n * Throws on malformed input.\n * @param  {String}  str  certified-sane `@p` literal string\n */\nexport function parseP(str: string): bigint {\n  const syls = patp2syls(str);\n\n  const syl2bin = (idx: number) => {\n    return idx.toString(2).padStart(8, '0');  //NOTE  base16 isn't any faster\n  }\n\n  const addr = syls.reduce(\n    (acc, syl, idx) =>\n      idx % 2 !== 0 || syls.length === 1\n        ? acc + syl2bin(suffixes.indexOf(syl))\n        : acc + syl2bin(prefixes.indexOf(syl)),\n    ''\n  );\n\n  const num = BigInt('0b' + addr);\n  return ob.fynd(num);\n}\n\n/**\n * Convert a valid `@p` literal string to a bigint.\n * Returns null on malformed input.\n * @param  {String}  str  `@p` literal string\n */\nexport function parseValidP(str: string): bigint | null {\n  if (!regexP.test(str) || !validSyllables(str)) return null;\n  const res = parseP(str);\n  return (str === renderP(res)) ? res : null;\n}\n\n/**\n * Convert a number to a @p-encoded string.\n * @param  {bigint}  num\n */\nexport function renderP(num: bigint): string {\n  const sxz = ob.fein(num);\n  const dyx = Math.ceil(sxz.toString(16).length / 2);\n  const dyy = Math.ceil(sxz.toString(16).length / 4);\n\n  function loop(tsxz: bigint, timp: number, trep: string): string {\n    const log = tsxz & 0xFFFFn;\n    const pre = prefixes[Number(log >> 8n)];\n    const suf = suffixes[Number(log & 0xFFn)];\n    const etc = (timp & 0b11) ? '-' : ((timp === 0) ? '' : '--');\n\n    const res = pre + suf + etc + trep;\n\n    return timp === dyy ? trep : loop(tsxz >> 16n, timp + 1, res);\n  }\n\n  return (\n    '~' + (dyx <= 1 ? suffixes[Number(sxz)] : loop(sxz, 0, ''))\n  );\n}\n\n//\n//  utilities\n//\n\n/**\n * Validate a @p string.\n *\n * @param  {String}  str a string\n * @return  {boolean}\n */\nexport function isValidP(str: string): boolean {\n  return regexP.test(str)               //  general structure\n      && validSyllables(str)            //  valid syllables\n      && str === renderP(parseP(str));  //  no leading zeroes\n}\n\n/**\n * Determine the `$rank` of a `@p` value or literal.\n * Throws on malformed input string.\n * @param   {String}  who  `@p` value or literal string\n */\nexport function clan(who: bigint | string): rank {\n  let num: bigint;\n  if (typeof who === 'bigint') num = who;\n  else num = checkedParseP(who);\n\n  return num <= 0xFFn\n    ? 'czar'\n    : num <= 0xFFFFn\n    ? 'king'\n    : num <= 0xFFFFFFFFn\n    ? 'duke'\n    : num <= 0xFFFFFFFFFFFFFFFFn\n    ? 'earl'\n    : 'pawn';\n}\n\n/**\n * Determine the \"size\" of a `@p` value or literal.\n * Throws on malformed input string.\n * @param   {String}  who  `@p` value or literal string\n */\nexport function kind(who: bigint | string): size {\n  return rankToSize(clan(who));\n}\n\nexport function rankToSize(rank: rank): size {\n  switch (rank) {\n    case 'czar': return 'galaxy';\n    case 'king': return 'star';\n    case 'duke': return 'planet';\n    case 'earl': return 'moon';\n    case 'pawn': return 'comet';\n  }\n}\nexport function sizeToRank(size: size): rank {\n  switch (size) {\n    case 'galaxy': return 'czar';\n    case 'star':   return 'king';\n    case 'planet': return 'duke';\n    case 'moon':   return 'earl';\n    case 'comet':  return 'pawn';\n  }\n}\n\n/**\n * Determine the parent of a `@p` value.\n * Throws on malformed input string.\n * @param  {String | number}  who  `@p` value or literal string\n */\nexport function sein(who: bigint): bigint;\nexport function sein(who: string): string;\nexport function sein(who: bigint | string): typeof who {\n  let num: bigint;\n  if (typeof who === 'bigint') num = who;\n  else num = checkedParseP(who);\n\n  let mir = clan(num);\n\n  const res =\n    mir === 'czar'\n      ? num\n      : mir === 'king'\n      ? num & 0xFFn\n      : mir === 'duke'\n      ? num & 0xFFFFn\n      : mir === 'earl'\n      ? num & 0xFFFFFFFFn\n      : num & 0xFFFFn;\n\n  if (typeof who === 'bigint') return res;\n  else return renderP(res);\n}\n\n/**\n * Render short-form ship name.\n * Throws on malformed input string.\n * @param  {String | number}  who  `@p` value or literal string\n */\nexport function cite(who: bigint | string): string {\n  let num: bigint;\n  if (typeof who === 'bigint') num = who;\n  else num = checkedParseP(who);\n\n  if (num <= 0xFFFFFFFFn) {\n    return renderP(num);\n  } else if (num <= 0xFFFFFFFFFFFFFFFFn) {\n    return renderP(num & 0xFFFFFFFFn).replace('-', '^');\n  } else {\n    return renderP(BigInt('0x'+num.toString(16).slice(0,4))) + '_' + renderP(num & 0xFFFFn).slice(1);\n  }\n}\n\n//\n//  internals\n//\n\nfunction checkedParseP(str: string): bigint {\n  if (!isValidP(str)) throw new Error('invalid @p literal: ' + str);\n  return parseP(str);\n}\n\nconst pre = `\ndozmarbinwansamlitsighidfidlissogdirwacsabwissib\\\nrigsoldopmodfoglidhopdardorlorhodfolrintogsilmir\\\nholpaslacrovlivdalsatlibtabhanticpidtorbolfosdot\\\nlosdilforpilramtirwintadbicdifrocwidbisdasmidlop\\\nrilnardapmolsanlocnovsitnidtipsicropwitnatpanmin\\\nritpodmottamtolsavposnapnopsomfinfonbanmorworsip\\\nronnorbotwicsocwatdolmagpicdavbidbaltimtasmallig\\\nsivtagpadsaldivdactansidfabtarmonranniswolmispal\\\nlasdismaprabtobrollatlonnodnavfignomnibpagsopral\\\nbilhaddocridmocpacravripfaltodtiltinhapmicfanpat\\\ntaclabmogsimsonpinlomrictapfirhasbosbatpochactid\\\nhavsaplindibhosdabbitbarracparloddosbortochilmac\\\ntomdigfilfasmithobharmighinradmashalraglagfadtop\\\nmophabnilnosmilfopfamdatnoldinhatnacrisfotribhoc\\\nnimlarfitwalrapsarnalmoslandondanladdovrivbacpol\\\nlaptalpitnambonrostonfodponsovnocsorlavmatmipfip\\\n`;\n\nconst suf = `\nzodnecbudwessevpersutletfulpensytdurwepserwylsun\\\nrypsyxdyrnuphebpeglupdepdysputlughecryttyvsydnex\\\nlunmeplutseppesdelsulpedtemledtulmetwenbynhexfeb\\\npyldulhetmevruttylwydtepbesdexsefwycburderneppur\\\nrysrebdennutsubpetrulsynregtydsupsemwynrecmegnet\\\nsecmulnymtevwebsummutnyxrextebfushepbenmuswyxsym\\\nselrucdecwexsyrwetdylmynmesdetbetbeltuxtugmyrpel\\\nsyptermebsetdutdegtexsurfeltudnuxruxrenwytnubmed\\\nlytdusnebrumtynseglyxpunresredfunrevrefmectedrus\\\nbexlebduxrynnumpyxrygryxfeptyrtustyclegnemfermer\\\ntenlusnussyltecmexpubrymtucfyllepdebbermughuttun\\\nbylsudpemdevlurdefbusbeprunmelpexdytbyttyplevmyl\\\nwedducfurfexnulluclennerlexrupnedlecrydlydfenwel\\\nnydhusrelrudneshesfetdesretdunlernyrsebhulryllud\\\nremlysfynwerrycsugnysnyllyndyndemluxfedsedbecmun\\\nlyrtesmudnytbyrsenwegfyrmurtelreptegpecnelnevfes\\\n`;\n\nexport const prefixes = pre.match(/.{1,3}/g) as RegExpMatchArray;\nexport const suffixes = suf.match(/.{1,3}/g) as RegExpMatchArray;\n\nfunction patp2syls(name: string): string[] {\n  return name.replace(/[\\^~-]/g, '').match(/.{1,3}/g) || [];\n}\n\n//  check if string contains valid syllables\nfunction validSyllables(name: string): boolean {\n  const syls = patp2syls(name);\n  return !(syls.length % 2 !== 0 && syls.length !== 1)  // wrong length\n      && syls.every((syl, index) =>  //  invalid syllables\n           index % 2 !== 0 || syls.length === 1\n           ? suffixes.includes(syl)\n           : prefixes.includes(syl)\n         );\n}\n","import { prefixes, suffixes } from './p';\n\n//TODO  investigate whether native UintArrays are more portable\n//      than node Buffers\n\n/**\n * Convert a number to a `@q`-encoded string.\n * @param   {bigint}  num\n * @return  {String}\n */\nexport function renderQ(num: bigint): string {\n  //NOTE  stupid hack to work around bad node Buffer spec\n  const hex = num.toString(16);\n  const lex = hex.length;\n  const buf = Buffer.from(hex.padStart(lex+lex%2, '0'), 'hex');\n  const chunked =\n    buf.length % 2 !== 0 && buf.length > 1\n      ? [[buf[0]]].concat(chunk(Array.from(buf.slice(1)), 2))\n      : chunk(Array.from(buf), 2);\n\n  const prefixName = (byts: number[]) =>\n    byts[1] === undefined\n      ? suffixes[byts[0]]\n      : prefixes[byts[0]] + suffixes[byts[1]];  //TODO  this branch unused\n\n  const name = (byts: number[]) =>\n    byts[1] === undefined\n      ? suffixes[byts[0]]\n      : prefixes[byts[0]] + suffixes[byts[1]];\n\n  const alg = (pair: number[]) =>\n    pair.length % 2 !== 0 && chunked.length > 1 ? prefixName(pair) : name(pair);\n\n  return chunked.reduce(\n    (acc, elem) => acc + (acc === '.~' ? '' : '-') + alg(elem),\n    '.~'\n  );\n}\n\n/**\n * Convert a `@q`-encoded string to a bigint.\n * Throws on malformed input.\n * @param   {String}  str `@q` string with leading .~\n * @return  {String}\n */\nexport function parseQ(str: string): bigint {\n  const chunks = str.slice(2).split('-');\n  const dec2hex = (dec: number) => {\n    if (dec < 0) throw new Error('malformed @q');\n    return dec.toString(16).padStart(2, '0');\n  }\n\n  const splat = chunks.map((chunk, i) => {\n    let syls = splitAt(3, chunk);\n    return (syls[1] === '' && i === 0)  //  singles only at the start\n      ? dec2hex(suffixes.indexOf(syls[0]))\n      : dec2hex(prefixes.indexOf(syls[0])) + dec2hex(suffixes.indexOf(syls[1]));\n  });\n\n  return BigInt('0x' + (str.length === 0 ? '00' : splat.join('')));\n}\n\nexport function parseValidQ(str: string): bigint | null {\n  try {\n    const num = parseQ(str);\n    return num;\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Validate a `@q` string.\n * @param   {String}  str  a string\n * @return  {boolean}\n */\nexport function isValidQ(str: string): boolean {\n  if (str === '') return false;\n  try {\n    parseQ(str);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\n//\n//  internals\n//\n\nfunction chunk<T>(arr: T[], size: number): T[][] {\n  let chunk: T[] = [];\n  let newArray = [chunk];\n\n  for (let i = 0; i < arr.length; i++) {\n    if (chunk.length < size) {\n      chunk.push(arr[i]);\n    } else {\n      chunk = [arr[i]];\n      newArray.push(chunk);\n    }\n  }\n\n  return newArray;\n}\n\nfunction splitAt(index: number, str: string) {\n  return [str.slice(0, index), str.slice(index)];\n}\n","export type precision = 'h' | 's' | 'd' | 'q' | precisionBits;\ntype precisionBits = { w: number, p: number, l: string };\n\n//  str: @r* format string including its leading . and ~s\nexport function parseR(per: precision, str: string): bigint {\n  per = getPrecision(per);\n  return parse(str.slice(per.l.length), per.w, per.p);\n}\n\nexport function renderR(per: precision, r: bigint): string {\n  per = getPrecision(per);\n  return per.l + rCo(deconstruct(r, BigInt(per.w), BigInt(per.p)));\n}\n\n//\n//  helpers\n//\n\nfunction getPrecision(per: precision): precisionBits {\n  if (per === 'h') return { w:  5, p:  10, l: '.~~'  }; else\n  if (per === 's') return { w:  8, p:  23, l: '.'    }; else\n  if (per === 'd') return { w: 11, p:  52, l: '.~'   }; else\n  if (per === 'q') return { w: 15, p: 112, l: '.~~~' }; else\n  return per;\n}\n\nfunction bitMask(bits: bigint): bigint {\n  return (2n ** bits) - 1n;\n}\n\n//\n//  parsing and construction\n//\n\n//  str: @r* format string with its leading . and ~ stripped off\n//  w:   exponent bits\n//  p:   mantissa bits\nfunction parse(str: string, w: number, p: number): bigint {\n  if (str === 'nan')  return makeNaN(w, p);\n  if (str === 'inf')  return makeInf(true, w, p);\n  if (str === '-inf') return makeInf(false, w, p);\n  let i = 0;\n  let sign = true;\n  if (str[i] === '-') {\n    sign = false;\n    i++;\n  }\n  let int = '';\n  while (str[i] !== '.' && str[i] !== 'e' && str[i] !== undefined) {\n    int += str[i++];\n  }\n  if (str[i] === '.') i++;\n  let fra = '';\n  while (str[i] !== 'e' && str[i] !== undefined) {\n    fra += str[i++];\n  }\n  if (str[i] === 'e') i++;\n  let expSign = true;\n  if (str[i] === '-') {\n    expSign = false;\n    i++;\n  }\n  let exp = '';\n  while (str[i] !== undefined) {\n    exp += str[i++];\n  }\n  return BigInt('0b' + makeFloat(w, p, sign, int, fra, expSign, Number(exp)));\n}\n\nfunction makeNaN(w: number, p: number): bigint {\n  return bitMask(BigInt(w + 1)) << BigInt(p - 1);\n}\n\nfunction makeInf(s: boolean, w: number, p: number): bigint {\n  return bitMask(BigInt(s ? w : w + 1)) << BigInt(p);\n}\n\n//  turn into representation without exponent\nfunction makeFloat(w: number, p: number, sign: boolean, intPart: string, floatPart: string, expSign: boolean, exp: number) {\n  if (exp !== 0) {\n    if (expSign) {\n      intPart = intPart + floatPart.padEnd(exp, '0').slice(0, exp);\n      floatPart = floatPart.slice(exp);\n    } else {\n      floatPart = intPart.padStart(exp, '0').slice(-exp) + floatPart;\n      intPart = intPart.slice(0, -exp);\n    }\n  }\n  return construct(p, w, sign, BigInt(intPart), BigInt(floatPart.length), BigInt(floatPart));\n}\n\n//NOTE  modified from an encodeFloat() written by by Jonas Raoni Soares Silva,\n//      made to operate on (big)integers, without using js's float logic.\n//      http://jsfromhell.com/classes/binary-parser\n//      (yes, this code is vaguely deranged. but it works!)\nfunction construct(precisionBits: number, exponentBits: number,\n                   sign: boolean, intPart: bigint, floatDits: bigint, floatPart: bigint) {\n  //REVIEW  when do we trigger this?\n  //        inputs representing nrs too large for exponentBits?\n  //        inputs with precision we can't match?\n  //        add tests for those cases! should match stdlib result.\n  function exceed(x: string) {\n    console.warn(x);\n    return 1;\n  }\n\n  const bias = 2**(exponentBits - 1) - 1,\n    minExp = -bias + 1,\n    maxExp = bias,\n    minUnnormExp = minExp - precisionBits,\n    len = 2 * bias + 1 + precisionBits + 3,\n    bin = new Array(len),\n    denom = 10n ** floatDits;\n  var exp = 0,\n    signal = !sign,\n    i, lastBit, rounded, j, result, n;\n  //  zero-initialize the bit-array\n  for (i = len; i; bin[--i] = 0);\n  //  integral into bits\n  for (i = bias + 2; intPart && i; bin[--i] = intPart & 1n, intPart = intPart >> 1n);\n  //  fractional into bits\n  for (i = bias + 1; floatPart > 0n && (i < len); (bin[++i] = (((floatPart *= 2n) >= denom) ? 1 : 0)) && (floatPart = floatPart - denom));\n  //  walk cursor (i) to first 1-bit.\n  for (i = -1; ++i < len && !bin[i];);\n  //  round if needed\n  if (bin[(lastBit = precisionBits - 1 + (i = (exp = bias + 1 - i) >= minExp && exp <= maxExp ? i + 1 : bias + 1 - (exp = minExp - 1))) + 1]) {\n    if (!(rounded = bin[lastBit]))\n      for (j = lastBit + 2; !rounded && j < len; rounded = bin[j++]);\n    for (j = lastBit + 1; rounded && --j >= 0; (bin[j] = (!bin[j] ? 1 : 0) - 0) && (rounded = 0));\n  }\n  //  walk cursor (i) to first/next(??) 1-bit\n  for (i = i - 2 < 0 ? -1 : i - 3; ++i < len && !bin[i];);\n\n  //  set exponent, throwing on under- and overflows\n  (exp = bias + 1 - i) >= minExp && exp <= maxExp ? ++i : exp < minExp &&\n    (exp != bias + 1 - len && exp < minUnnormExp && exceed('r.construct underflow'), i = bias + 1 - (exp = minExp - 1));\n  intPart && (exceed(intPart ? 'r.construct overflow' : 'r.construct'),\n    exp = maxExp + 1, i = bias + 2);\n  //  exponent into bits\n  for (n = Math.abs(exp + bias), j = exponentBits + 1, result = ''; --j; result = (n & 1) + result, n = n >>= 1);\n  //  final serialization: sign + exponent + mantissa\n  return (signal ? '1' : '0') + result + bin.slice(i, i + precisionBits).join('');\n};\n\n//\n//  deconstruction and rendering\n//\n\ntype dn = { t: 'd', s: boolean, e: number, a: string }\n        | { t: 'i', s: boolean }\n        | { t: 'n' };\n\n//NOTE  not _exactly_ like +r-co due to dragon4() outExponent semantics.\n//      if we copy +r-co logic exactly we off-by-one all over the place.\nfunction rCo(a: dn): string {\n  if (a.t === 'n') return 'nan';\n  if (a.t === 'i') return a.s ? 'inf' : '-inf';\n  let e: number;\n  if ((a.e - 4) > 0) {  //  12000 -> 12e3 e>+2\n    e = 1;\n  } else\n  if ((a.e + 2) < 0) {  //  0.001 -> 1e-3 e<-2\n    e = 1;\n  } else {  //  1.234e2 -> '.'@3 -> 123 .4\n    e = a.e + 1;\n    a.e = 0;\n  }\n  return (a.s ? '' : '-')\n       + edCo(e, a.a)\n       + ((a.e === 0) ? '' : ('e' + a.e.toString()));\n}\n\nfunction edCo(exp: number, int: string): string {\n  const dig: number = Math.abs(exp);\n  if (exp <= 0) {\n    return '0.' + (''.padEnd(dig, '0')) + int;\n  } else {\n    const len = int.length;\n    if (dig >= len) return int + ''.padEnd((dig - len), '0');\n    return int.slice(0, dig) + '.' + int.slice(dig);\n  }\n}\n\n//NOTE  the deconstruct() and dragon4() below are ported from Ryan Juckett's\n//      PrintFloat32() and Dragon4() respectively. its general structure is\n//      copied one-to-one and comments are preserved, but we got to drop some\n//      logic due to having access to native bigints. see his post series for\n//      a good walkthrough of the underlying algorithm and its implementation,\n//      as well as pointers to additional references.\n//      https://www.ryanjuckett.com/printing-floating-point-numbers/\n//      we only use one of the cutoff modes, but have maintained support for\n//      the others for completeness' sake.\n\n//  deconstruct(): binary float to $dn structure (+drg:ff)\nfunction deconstruct(float: bigint, exponentBits: bigint, precisionBits: bigint): dn {\n  //  deconstruct the value into its components\n  const mantissaMask = bitMask(precisionBits);\n  const exponentMask = bitMask(exponentBits);\n  const floatMantissa: bigint = float & mantissaMask;\n  const floatExponent: bigint = (float >> BigInt(precisionBits)) & exponentMask;\n  const sign: boolean = ((float >> BigInt(exponentBits + precisionBits)) & 1n) === 0n;\n\n  //  transform the components into the values they represent\n  let mantissa: bigint, exponent: bigint, mantissaHighBitIdx: number, unequalMargins: boolean;\n  if (floatExponent === exponentMask) {  //  specials\n    if (floatMantissa === 0n)\n      return { t: 'i', s: sign };  //  infinity\n    return { t: 'n' };  //  nan\n  } else\n  if (floatExponent !== 0n) {  //  normalized\n    //  the floating point equation is:\n    //    value = (1 + mantissa/2^23) * 2 ^ (exponent-127)\n    //  we convert the integer equation by factoring a 2^23 out of the exponent\n    //    value = (1 + mantissa/2^23) * 2^23 * 2 ^ (exponent-127-23)\n    //    value = (2^23 + mantissa) * 2 ^ (exponent-127-23)\n    //  because of the implied 1 in front of the mantissa we have 24 bits of precision\n    //    m = (2^23 + mantissa)\n    //    e = (exponent-127-23)\n    mantissa = (1n << BigInt(precisionBits)) | floatMantissa;\n    exponent = floatExponent - ((2n**(exponentBits-1n))-1n) - precisionBits;\n    mantissaHighBitIdx = Number(precisionBits);\n    unequalMargins = (floatExponent !== 1n) && (floatMantissa === 0n);\n  } else {  //  denormalized\n    //  the floating point equation is:\n    //    value = (mantissa/2^23) * 2 ^ (1-127)\n    //  we convert the integer equation by factoring a 2^23 out of the exponent\n    //    value = (mantissa/2^23) * 2^23 * 2 ^ (1-127-23)\n    //    value = mantissa * 2 ^ (1-127-23)\n    //  we have up to 23 bits of precision\n    //    m = (mantissa)\n    //    e = (1-127-23)\n    mantissa = floatMantissa;\n    exponent = 1n - ((2n**(exponentBits-1n))-1n) - precisionBits;\n    mantissaHighBitIdx = mantissa.toString(2).length - 1;  //  poor man's log2\n    unequalMargins = false;\n  }\n\n  const buf = (2n**precisionBits).toString(10).length + 1;\n  const res = dragon4(mantissa, Number(exponent), mantissaHighBitIdx, unequalMargins, 'unique', 0, buf);\n  return { t: 'd', s: sign, e: res.outExponent, a: res.digits };\n}\n\n//  dragon4(): binary float to decimal digits\n//\n//    like +drg:fl (but with slightly different outExponent semantics)\n//\n//    mantissa:           value significand\n//    exponent:           value exponent in base 2\n//    mantissaHighBitIdx: highest set mantissa bit index\n//    hasUnequalMargins:  is the high margin twice the low margin\n//    cutoffMode:         'unique' | 'totalLength' | 'fractionLength'\n//    cutoffNumber:       cutoff parameter for the selected mode\n//    bufferSize:         max output digits\n//\n//    digits:             printed digits\n//    outExponent:        exponent of the first digit printed\n//\nfunction dragon4(\n  mantissa: bigint,\n  exponent: number,\n  mantissaHighBitIdx: number,\n  hasUnequalMargins: boolean,\n  cutoffMode: 'unique' | 'totalLength' | 'fractionLength',\n  cutoffNumber: number,\n  bufferSize: number\n): { digits: string, outExponent: number } {\n  const bexponent = BigInt(exponent);\n  let pCurDigit = 0;  //  pointer into output buffer (digit string index)\n  let outBuffer = new Array(bufferSize).fill('0');\n  let outExponent = 0;\n\n  //  if mantissa is zero, output \"0\"\n  if (mantissa === 0n) {\n    outBuffer[0] = '0';\n    outExponent = 0;\n    return { digits: outBuffer.slice(0, 1).join(''), outExponent };\n  }\n\n  //  compute the initial state in integral form such that:\n  //  value     = scaledValue / scale\n  //  marginLow = scaledMarginLow / scale\n\n  let scale: bigint;             //  positive scale applied to value and margin such\n                                 //  that they can be represented as whole numbers\n  let scaledValue: bigint;       //  scale * mantissa\n  let scaledMarginLow: bigint;   //  scale * 0.5 * (distance between this floating-\n                                 //  point number and its immediate lower value)\n\n  //  for normalized IEEE floating point values, each time the exponent is\n  //  incremented the margin also doubles. That creates a subset of transition\n  //  numbers where the high margin is twice the size of the low margin.\n  let scaledMarginHigh: bigint;\n\n  if (hasUnequalMargins) {\n    if (exponent > 0) {  //  no fractional component\n      //  1. expand the input value by multiplying out the mantissa and exponent.\n      //     this represents the input value in its whole number representation.\n      //  2. apply an additional scale of 2 such that later comparisons against\n      //     the margin values are simplified.\n      //  3. set the margin value to the lowest mantissa bit's scale.\n\n      scaledValue = 4n * mantissa;\n      scaledValue <<= bexponent;              //  2 * 2 * mantissa*2^exponent\n      scale = 4n;                             //  2 * 2 * 1\n      scaledMarginLow = 1n << bexponent;      //  2 * 2^(exponent-1)\n      scaledMarginHigh = 1n << bexponent+1n;  //  2 * 2 * 2^(exponent-1)\n    } else {  //  fractional component\n      //  in order to track the mantissa data as an integer, we store it as is\n      //  with a large scale\n\n      scaledValue = 4n * mantissa;  //  2 * 2 * mantissa\n      scale = 1n << -bexponent+2n;  //  2 * 2 * 2^(-exponent)\n      scaledMarginLow = 1n;         //  2 * 2^(-1)\n      scaledMarginHigh = 2n;        //  2 * 2 * 2^(-1)\n    }\n  } else {\n    if (exponent > 0) {  //  no fractional component\n      //  1. expand the input value by multiplying out the mantissa and exponent.\n      //     this represents the input value in its whole number representation.\n      //  2. apply an additional scale of 2 such that later comparisons against\n      //     the margin values are simplified.\n      //  3. set the margin value to the lowest mantissa bit's scale.\n\n      scaledValue = 2n * mantissa;\n      scaledValue <<= bexponent;          //  2 * mantissa*2^exponent\n      scale = 2n;                         //  2 * 1\n      scaledMarginLow = 1n << bexponent;  //  2 * 2^(exponent-1)\n      scaledMarginHigh = scaledMarginLow;\n    } else {  //  fractional component\n      //  in order to track the mantissa data as an integer, we store it as is\n      //  with a large scale\n\n      scaledValue = 2n * mantissa;          //  2 * mantissa\n      scale = 1n << BigInt(-exponent + 1);  //  2 * 2^(-exponent)\n      scaledMarginLow = 1n;                 //  2 * 2^(-1)\n      scaledMarginHigh = scaledMarginLow;\n    }\n  }\n\n  //  compute an estimate for digitExponent that will be correct or undershoot\n  //  by one. this optimization is based on the paper \"Printing Floating-Point\n  //  Numbers Quickly and Accurately\" by Burger and Dybvig.\n  //  http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.72.4656&rep=rep1&type=pdf\n  //  we perform an additional subtraction of 0.69 to increase the frequency of\n  //  a failed estimate because that lets us take a faster branch in the code.\n  //  0.69 is chosen because 0.69 + log10(2) is less than one by a reasonable\n  //  epsilon that will account for any floating point error.\n\n  //  we want to set digitExponent to floor(log10(v)) + 1\n  //  v = mantissa*2^exponent\n  //  log2(v) = log2(mantissa) + exponent;\n  //  log10(v) = log2(v) * log10(2)\n  //  floor(log2(v)) = mantissaHighBitIdx + exponent;\n  //  log10(v) - log10(2) < (mantissaHighBitIdx + exponent) * log10(2) <= log10(v)\n  //  log10(v) < (mantissaHighBitIdx + exponent) * log10(2) + log10(2) <= log10(v) + log10(2)\n  //  floor( log10(v) ) < ceil( (mantissaHighBitIdx + exponent) * log10(2) ) <= floor( log10(v) ) + 1\n  //NOTE  loses precision! wants a 64-bit float. but seems precise enough...\n  const log10_2 = 0.30102999566398119521373889472449;\n  let digitExponent = Math.ceil((mantissaHighBitIdx + exponent) * log10_2 - 0.69);\n\n  //  if the digit exponent is smaller than the smallest desired digit for\n  //  fractional cutoff, pull the digit back into legal range at which point we\n  //  will round to the appropriate value.\n  //  note that while our value for digitExponent is still an estimate, this is\n  //  safe because it only increases the number. this will either correct\n  //  digitExponent to an accurate value or it will clamp it above the accurate\n  //  value.\n  if (cutoffMode === 'fractionLength' && digitExponent <= -cutoffNumber) {\n    digitExponent = -cutoffNumber + 1;\n  }\n\n  //  scale adjustment for digit exponent, divide value by 10^digitExponent\n  if (digitExponent > 0) {\n    //  the exponent is positive creating a division so we multiply up the scale\n    scale *= BigInt(10) ** BigInt(digitExponent);\n  } else if (digitExponent < 0) {\n    //  the exponent is negative creating a multiplication so we multiply\n    //  up the scaledValue, scaledMarginLow and scaledMarginHigh\n    const pow10 = BigInt(10) ** BigInt(-digitExponent);\n    scaledValue *= pow10;\n    scaledMarginLow *= pow10;\n    if (scaledMarginHigh !== scaledMarginLow) {\n      scaledMarginHigh *= scaledMarginLow;\n    }\n  }\n\n  //  if (value >= 1), our estimate for digitExponent was too low\n  if (scaledValue >= scale) {\n    //  the exponent estimate was incorrect. increment the exponent and don't\n    //  perform the premultiply needed for the first loop iteration.\n    digitExponent += 1;\n  } else {\n    //  the exponent estimate was correct. multiply larger by the output base\n    //  to prepare for the first loop iteration.\n    scaledValue *= 10n;\n    scaledMarginLow *= 10n;\n    if (scaledMarginHigh !== scaledMarginLow) scaledMarginHigh *= 10n;\n  }\n\n  //  compute the cutoff exponent (the exponent of the final digit to print).\n  //  default to the maximum size of the output buffer.\n  let cutoffExponent = digitExponent - bufferSize;\n  if (cutoffMode === 'totalLength') {\n    let desired = digitExponent - cutoffNumber;\n    if (desired > cutoffExponent) cutoffExponent = desired;\n  } else if (cutoffMode === 'fractionLength') {\n    let desired = -cutoffNumber;\n    if (desired > cutoffExponent) cutoffExponent = desired;\n  }\n\n  //  output the exponent of the first digit we will print\n  outExponent = digitExponent - 1;\n\n  //NOTE  thanks to native bigints, no bit block normalization needed\n\n  //  these values are used to inspect why the print loop terminated so we can properly\n  //  round the final digit.\n  let low = false;      //  did the value get within marginLow distance from zero\n  let high = false;     //  did the value get within marginHigh distance from one\n  let outputDigit = 0;  //  current digit being output\n\n  if (cutoffMode === 'unique') {\n    //  for the unique cutoff mode, we will try to print until we have reached\n    //  a level of precision that uniquely distinguishes this value from its\n    //  neighbors. if we run out of space in the output buffer, we exit early.\n\n    while (true) {\n      digitExponent -= 1;\n\n      //  extract the digit\n      outputDigit = Number(scaledValue / scale);\n      scaledValue = scaledValue % scale;\n\n      //  update the high end of the value\n      let scaledValueHigh = scaledValue + scaledMarginHigh;\n\n      //  stop looping if we are far enough away from our neighboring values\n      //  or if we have reached the cutoff digit\n      low = scaledValue < scaledMarginLow;\n      high = scaledValueHigh > scale;\n      if (low || high || (digitExponent === cutoffExponent)) break;\n\n      //  store the output digit\n      outBuffer[pCurDigit] = String.fromCharCode('0'.charCodeAt(0) + outputDigit);\n      pCurDigit += 1;\n\n      //  mulitply larger by the output base\n      scaledValue *= 10n;\n      scaledMarginLow *= 10n;\n      if (scaledMarginHigh !== scaledMarginLow) scaledMarginHigh *= 10n;\n    }\n  } else {\n    //  for length based cutoff modes, we will try to print until we have\n    //  exhausted all precision (i.e. all remaining digits are zeros) or until\n    //  we reach the desired cutoff digit.\n\n    low = false;\n    high = false;\n    while (true) {\n      digitExponent -= 1;\n\n      //  extract the digit\n      outputDigit = Number(scaledValue / scale);\n      scaledValue = scaledValue % scale;\n\n      if (scaledValue === 0n || digitExponent === cutoffExponent) break;\n\n      //  store the output digit\n      outBuffer[pCurDigit] = String.fromCharCode('0'.charCodeAt(0) + outputDigit);\n      pCurDigit += 1;\n\n      //  multiply larger by the output base\n      scaledValue *= 10n;\n    }\n  }\n\n  //  round off the final digit.\n  //  default to rounding down if value got too close to 0\n  let roundDown = low;\n\n  if (low === high) {  //  legal to round up and down\n    //  round to the closest digit by comparing value with 0.5. to do this we\n    //  need to convert the inequality to large integer values.\n    //  compare( value, 0.5 )\n    //  compare( scale * value, scale * 0.5 )\n    //  compare( 2 * scale * value, scale )\n    scaledValue *= 2n;\n    let compare = scaledValue < scale ? -1\n                : (scaledValue > scale ? 1 : 0);\n    roundDown = compare < 0;\n    //  if we are directly in the middle, round towards the even digit\n    //  (i.e. IEEE rouding rules)\n    if (compare === 0) roundDown = (outputDigit & 1) === 0;\n  }\n\n  //  print the rounded digit\n  if (roundDown) {\n    outBuffer[pCurDigit] = String.fromCharCode('0'.charCodeAt(0) + outputDigit);\n    pCurDigit += 1;\n  } else {\n    //  handle rounding up\n    if (outputDigit === 9) {\n      //  find the first non-nine prior digit\n      while (true) {\n        if (pCurDigit === 0) {  //  first digit\n          //  output 1 at the next highest exponent\n          outBuffer[pCurDigit] = '1';\n          pCurDigit += 1;\n          outExponent += 1;\n          break;\n        }\n        pCurDigit -= 1;\n        if (outBuffer[pCurDigit] !== '9') {\n          //  increment the digit\n          outBuffer[pCurDigit] = String.fromCharCode(outBuffer[pCurDigit].charCodeAt(0) + 1);\n          pCurDigit += 1;\n          break;\n        }\n      }\n    } else {\n      //  values in the range [0,8] can perform a simple round up\n      outBuffer[pCurDigit] = String.fromCharCode('0'.charCodeAt(0) + outputDigit + 1);\n      pCurDigit += 1;\n    }\n  }\n\n  //  trim trailing zeroes, produce output\n  const digits = outBuffer.slice(0, pCurDigit).join('');\n  return { digits, outExponent };\n}\n","//  parse: deserialize from atom literal strings\n//\n//    atom literal parsing from hoon 137 (and earlier).\n//    stdlib arm names are included for ease of cross-referencing.\n//\n//TODO  unsupported auras: @dr, @uc\n\nimport { aura, dime, coin } from './types';\n\nimport { parseDa, parseDr } from './d';\nimport { parseValidP, regexP } from './p';\nimport { parseValidQ } from './q';\nimport { parseR, precision } from './r';\n\nfunction integerRegex(a: string, b: string, c: string, d: number, e: boolean = false): RegExp {\n  const pre = d === 0 ? b       : `${b}${c}{0,${d-1}}`;\n  const aft = d === 0 ? `${c}*` : `(\\\\.${c}{${d}})*`;\n  return new RegExp(`^${e ? '\\\\-\\\\-?' : ''}${a}(0|${pre}${aft})$`);\n}\n\nfunction floatRegex(a: number): RegExp {\n  return new RegExp(`^\\\\.~{${a}}(nan|\\\\-?(inf|(0|[1-9][0-9]*)(\\\\.[0-9]+)?(e\\\\-?(0|[1-9][0-9]*))?))$`);\n}\n\n//TODO  rewrite with eye towards capturing groups?\nexport const regex: { [key in aura]: RegExp } = {\n  'c':   /^~\\-((~[0-9a-fA-F]+\\.)|(~[~\\.])|[0-9a-z\\-\\._])*$/,\n  'da':  /^~(0|[1-9][0-9]*)\\-?\\.0*([1-9]|1[0-2])\\.0*[1-9][0-9]*(\\.\\.([0-9]+)\\.([0-9]+)\\.([0-9]+)(\\.(\\.[0-9a-f]{4})+)?)?$/,\n  'dr':  /^~((d|h|m|s)(0|[1-9][0-9]*))(\\.(d|h|m|s)(0|[1-9][0-9]*))*(\\.(\\.[0-9a-f]{4})+)?$/,  //TODO  first ? to * mb\n  'f':   /^\\.(y|n)$/,\n  'if':  /^(\\.(0|[1-9][0-9]{0,2})){4}$/,\n  'is':  /^(\\.(0|[1-9a-fA-F][0-9a-fA-F]{0,3})){8}$/,\n  'n':   /^~$/,\n  'p':   regexP,  //NOTE  matches shape but not syllables\n  'q':   /^\\.~(([a-z]{3}|[a-z]{6})(\\-[a-z]{6})*)$/,  //NOTE  matches shape but not syllables\n  'rd':  floatRegex(1),\n  'rh':  floatRegex(2),\n  'rq':  floatRegex(3),\n  'rs':  floatRegex(0),\n  'sb':  integerRegex('0b', '1', '[01]', 4, true),\n  'sd':  integerRegex('', '[1-9]', '[0-9]', 3, true),\n  'si':  integerRegex('0i', '[1-9]', '[0-9]', 0, true),\n  'sv':  integerRegex('0v', '[1-9a-v]', '[0-9a-v]', 5, true),\n  'sw':  integerRegex('0w', '[1-9a-zA-Z~-]', '[0-9a-zA-Z~-]', 5, true),\n  'sx':  integerRegex('0x', '[1-9a-f]', '[0-9a-f]', 4, true),\n  't':   /^~~((~[0-9a-fA-F]+\\.)|(~[~\\.])|[0-9a-z\\-\\._])*$/,\n  'ta':  /^~\\.[0-9a-z\\-\\.~_]*$/,\n  'tas': /^[a-z][a-z0-9\\-]*$/,\n  'ub':  integerRegex('0b', '1', '[01]', 4),\n  'ud':  integerRegex('', '[1-9]', '[0-9]', 3),\n  'ui':  integerRegex('0i', '[1-9]', '[0-9]', 0),\n  'uv':  integerRegex('0v', '[1-9a-v]', '[0-9a-v]', 5),\n  'uw':  integerRegex('0w', '[1-9a-zA-Z~-]', '[0-9a-zA-Z~-]', 5),\n  'ux':  integerRegex('0x', '[1-9a-f]', '[0-9a-f]', 4),\n};\n\n//  parse(): slav()\n//  slav(): slaw() but throwing on failure\n//\nexport const parse = slav;\nexport default parse;\nexport function slav(aura: aura, str: string): bigint {\n  const out = slaw(aura, str);\n  if (!out) {\n    throw new Error('slav: failed to parse @' + aura + ' from string: ' + str);\n  }\n  return out;\n}\n\n//  tryParse(): slaw()\n//  slaw(): parse string as specific aura, null if that fails\n//\nexport const tryParse = slaw;\nexport function slaw(aura: aura, str: string): bigint | null {\n  //  if the aura has a regex, test with that first\n  //TODO  does double work with checks in nuck?\n  //\n  if (aura in regex && !regex[aura as aura].test(str)) {\n    return null;\n  }\n  //  proceed into parsing the string into a coin,\n  //  producing a result if the aura matches\n  //\n  //TODO  further short-circuit based on aura?\n  const coin = nuck(str);\n  if (coin && coin.type === 'dime' && coin.aura === aura) {\n    return coin.atom;\n  } else {\n    return null;\n  }\n}\n\nexport function valid(aura: aura, str: string): boolean {\n  return slaw(aura, str) !== null;\n}\n\n//  nuck(): parse string into coin, or null if that fails\n//\nexport function nuck(str: string): coin | null {\n  if (str === '') return null;\n\n  //  narrow options down by the first character, before doing regex tests\n  //  and trying to parse for real\n  //\n  const c = str[0];\n  if (c >= 'a' && c <= 'z') {  //  \"sym\"\n    if (regex['tas'].test(str)) {\n      return { type: 'dime', aura: 'tas', atom: stringToCord(str) };\n    } else {\n      return null;\n    }\n  } else\n  if (c >= '0' && c <= '9') {  //  \"bisk\"\n    const dim = bisk(str);\n    if (!dim) {\n      return null;\n    } else {\n      return { type: 'dime', ...dim };\n    }\n  } else\n  if (c === '-') {  //  \"tash\"\n    let pos = true;\n    if (str[1] == '-') {\n      str = str.slice(2);\n    } else {\n      str = str.slice(1);\n      pos = false;\n    }\n    const dim = bisk(str);\n    if (dim) {\n      // `@s`?:(pos (mul 2 b) ?:(=(0 b) 0 +((mul 2 (dec b)))))\n      if (pos) {\n        dim.atom = 2n * dim.atom;\n      } else if (dim.atom !== 0n) {\n        dim.atom = 1n + (2n * (dim.atom - 1n));\n      }\n      //NOTE  assumes bisk always returns u* auras\n      return { type: 'dime', aura: dim.aura.replace('u', 's') as aura, atom: dim.atom };\n    } else {\n      return null;\n    }\n  } else\n  if (c === '.') {  //  \"perd\", \"zust\"\n    //NOTE  doesn't match stdlib parsing order, but they're easy early-outs\n    if (str === '.y') {\n      return { type: 'dime', aura: 'f', atom: 0n };\n    } else\n    if (str === '.n') {\n      return { type: 'dime', aura: 'f', atom: 1n };\n    } else\n    //REVIEW  entering the branch this way assumes regexes for sequentially-tested auras don't overlap...\n    //        going down the list of options this way matches hoon parser behavior the closest, but is slow for the \"miss\" case.\n    //        could be optimized by hard-returning if the regex fails for cases where the lead char is unique.\n    //        should probably run some perf tests\n    if (regex['is'].test(str)) {\n      const value = str.slice(1).split('.').reduce((a, v) => a + v.padStart(4, '0'), '');\n      return { type: 'dime', aura: 'is', atom: BigInt('0x'+value) };\n    } else\n    if (regex['if'].test(str)) {\n      const value = str.slice(1).split('.').reduce((a, v, i) => (a + (BigInt(v) << BigInt(8 * (3 - i)))), 0n);\n      return { type: 'dime', aura: 'if', atom: value };\n    } else\n    if ( ( str[1] === '~' &&\n           (regex['rd'].test(str) || regex['rh'].test(str) || regex['rq'].test(str)) )\n      || regex['rs'].test(str) ) {  //  \"royl\"\n      let precision = 0;\n      while (str[precision+1] === '~') precision++;\n      let aura: aura;\n      switch (precision) {\n        case 0: aura = 'rs'; break;\n        case 1: aura = 'rd'; break;\n        case 2: aura = 'rh'; break;\n        case 3: aura = 'rq'; break;\n        default: throw new Error('parsing invalid @r*');\n      }\n      return { type: 'dime', aura, atom: parseR(aura[1] as precision, str) };\n    } else\n    if (str[1] === '~' && regex['q'].test(str)) {\n      const num = parseValidQ(str);\n      if (num === null) return null;\n      return { type: 'dime', aura: 'q', atom: num };\n    } else\n    if (str[1] === '_' && /^\\.(_([0-9a-zA-Z\\-\\.]|~\\-|~~)+)*__$/.test(str)) {  //  \"nusk\"\n      const coins = str.slice(1, -2).split('_').slice(1).map((s): coin | null => {\n        //NOTE  real +wick produces null for strings w/ other ~ chars,\n        //      but the regex above already excludes those\n        s = s.replaceAll('~-', '_').replaceAll('~~', '~');  //  \"wick\"\n        return nuck(s);\n      });\n      if (coins.some(c => c === null)) {\n        return null;\n      } else {\n        return { type: 'many', list: coins as coin[] };\n      }\n    }\n    return null;\n  } else\n  if (c === '~') {\n    if (str === '~') {\n      return { type: 'dime', aura: 'n', atom: 0n }\n    } else {  //  \"twid\"\n      if (regex['da'].test(str)) {\n        return { type: 'dime', aura: 'da', atom: parseDa(str) };\n      } else\n      if (regex['dr'].test(str)) {\n        return { type: 'dime', aura: 'dr', atom: parseDr(str) };\n      } else\n      if (regex['p'].test(str)) {\n        //NOTE  this still does the regex check twice...\n        const res = parseValidP(str);\n        if (res === null) return null;\n        return { type: 'dime', aura: 'p', atom: res };\n      } else\n      //TODO  test if these single-character checks affect performance or no,\n      //      or if we want to move them further up, etc.\n      if (str[1] === '.' && regex['ta'].test(str)) {\n        return { type: 'dime', aura: 'ta', atom: stringToCord(str.slice(2)) };\n      } else\n      if (str[1] === '~' && regex['t'].test(str)) {\n        return { type: 'dime', aura: 't', atom: stringToCord(decodeString(str.slice(2))) };\n      } else\n      if (str[1] === '-' && regex['c'].test(str)) {\n        //TODO  cheeky! this doesn't support the full range of inputs that the\n        //      hoon stdlib supports, but should work for all sane inputs.\n        //      no guarantees about behavior for insane inputs...\n        if (/^~\\-~[0-9a-f]+\\.$/.test(str)) {\n          return { type: 'dime', aura: 'c', atom: BigInt('0x' + str.slice(3, -1)) };\n        }\n        return { type: 'dime', aura: 'c', atom: stringToCord(decodeString(str.slice(2))) };\n      }\n    }\n    if ((str[1] === '0') && /^~0[0-9a-v]+$/.test(str)) {\n      return { type: 'blob', jam: slurp(5, UV_ALPHABET, str.slice(2)) };\n    }\n    return null;\n  }\n  return null;\n}\n\n//  bisk(): parse string into dime of integer aura, or null if that fails\n//\nfunction bisk(str: string): dime | null {\n  switch (str.slice(0, 2)) {\n    case '0b':  //  \"bay\"\n      if (regex['ub'].test(str)) {\n        return { aura: 'ub', atom: BigInt(str.replaceAll('.', '')) };\n      } else {\n        return null;\n      }\n\n    case '0c':  //  \"fim\"\n      //TODO  support base58check\n      console.log('aura-js: @uc parsing unsupported (bisk)');\n      return null;\n\n    case '0i':  //  \"dim\"\n      if (regex['ui'].test(str)) {\n        return { aura: 'ui', atom: BigInt(str.slice(2)) }\n      } else {\n        return null;\n      }\n\n    case '0x':  //  \"hex\"\n      if (regex['ux'].test(str)) {\n        return { aura: 'ux', atom: BigInt(str.replaceAll('.', '')) };\n      } else {\n        return null;\n      }\n\n    case '0v':  //  \"viz\"\n      if (regex['uv'].test(str)) {\n        return { aura: 'uv', atom: slurp(5, UV_ALPHABET, str.slice(2)) };\n      } else {\n        return null;\n      }\n\n    case '0w':  //  \"wiz\"\n      if (regex['uw'].test(str)) {\n        return { aura: 'uw', atom: slurp(6, UW_ALPHABET, str.slice(2)) };\n      } else {\n        return null;\n      }\n\n    default:  //  \"dem\"\n      if (regex['ud'].test(str)) {\n        return { aura: 'ud', atom: BigInt(str.replaceAll('.', '')) }\n      } else {\n        return null;\n      }\n  }\n}\n\n//  decodeString(): decode string from @ta-safe format\n//\n//    using logic from +woad.\n//    for example, '~.some.~43.hars~21.' becomes 'some Chars!'\n//    assumes\n//\nexport function decodeString(str: string): string {\n  let out = '';\n  let i = 0;\n  while (i < str.length) {\n    switch (str[i]) {\n      case '.':\n        out = out + ' ';\n        i++; continue;\n      case '~':\n        switch (str[++i]) {\n          case '~':\n            out = out + '~';\n            i++; continue;\n          case '.':\n            out = out + '.';\n            i++; continue;\n          default:\n            let char: number = 0;\n            do {\n              char = (char << 4) | Number.parseInt(str[i++], 16);\n            } while (str[i] !== '.')\n            out = out + String.fromCodePoint(char);\n            i++; continue;\n        }\n      default:\n        out = out + str[i++];\n        continue;\n    }\n  }\n  return out;\n}\n\nfunction stringToCord(str: string): bigint {\n  return bytesToBigint(new TextEncoder().encode(str));\n}\n\nconst UW_ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-~';\nconst UV_ALPHABET = '0123456789abcdefghijklmnopqrstuv';\nfunction slurp(bits: number, alphabet: string, str: string): bigint {\n  let out = 0n;\n  const bbits = BigInt(bits);\n  while (str !== '') {\n    if (str[0] !== '.') {\n      out = (out << bbits) + BigInt(alphabet.indexOf(str[0]));\n    }\n    str = str.slice(1);\n  }\n  return out;\n}\n\n//REVIEW  should the reversal happen here or at callsites? depends on what endianness is idiomatic to js?\nfunction bytesToBigint(bytes: Uint8Array): bigint {\n  if (bytes.length === 0) return 0n;\n  //  if we have node's Buffer available, use it, it's wicked fast.\n  //  otherwise, constructing the hex string \"by hand\" and instantiating\n  //  a bigint from that is the fastest thing we can do.\n  //\n  if (typeof Buffer !== 'undefined')\n    return BigInt('0x' + Buffer.from(bytes.reverse()).toString('hex'));\n  let byt: number,\n    parts: string[] = [];\n  for (var i = bytes.length - 1; i >= 0; --i) {\n    byt = bytes[i];\n    parts.push(byt < 16 ? \"0\" + byt.toString(16) : byt.toString(16));\n  }\n  const num = BigInt('0x' + parts.join(''));\n  return num;\n}\n","//  render: serialize into atom literal strings\n//\n//    atom literal rendering from hoon 137 (and earlier).\n//    stdlib arm names are included for ease of cross-referencing.\n//\n//TODO  unsupported auras: @uc\n\nimport { aura, coin } from './types';\n\nimport { renderDa, renderDr } from './d';\nimport { renderP } from './p';\nimport { renderQ } from './q';\nimport { renderR } from './r';\n\n//  render(): scot()\n//  scot(): render atom as specific aura\n//\nexport const render = scot;\nexport default render;\nexport function scot(aura: aura, atom: bigint): string {\n  return rend({ type: 'dime', aura, atom });\n}\n\n//  rend(): render coin into string\n//\nexport function rend(coin: coin): string {\n  switch (coin.type) {\n    case 'blob':\n      return '~0' + coin.jam.toString(32);\n\n    case 'many':\n      return '.' + coin.list.reduce((acc: string, item: coin) => {\n        return acc + '_' + wack(rend(item));\n      }, '') + '__';\n\n    case 'dime':\n      switch(coin.aura[0]) {\n        case 'c':\n          //  this short-circuits the (wood (tuft atom)) calls that\n          //  hoon.hoon does, leaning on wood only for ascii characters,\n          //  and going straight to encoded representation for anything else.\n          //  (otherwise we'd need to stringify the utf-32 bytes, ouch.)\n          if (coin.atom < 0x7fn)\n            return '~-' + encodeString(String.fromCharCode(Number(coin.atom)));\n          else\n            return '~-~' + coin.atom.toString(16) + '.';\n        case 'd':\n          switch(coin.aura[1]) {\n            case 'a':\n              return renderDa(coin.atom);\n            case 'r':\n              return renderDr(coin.atom);\n            default:\n              return zco(coin.atom);\n          }\n        case 'f':\n          switch(coin.atom) {\n            case 0n: return '.y';\n            case 1n: return '.n';\n            default: return zco(coin.atom);\n          }\n        case 'n':\n          return '~';\n        case 'i':\n          switch(coin.aura[1]) {\n            case 'f': return '.' + spite(coin.atom, 1, 4, 10);\n            case 's': return '.' + spite(coin.atom, 2, 8, 16);\n            default: return zco(coin.atom);\n          }\n        case 'p':\n          return renderP(coin.atom);\n        case 'q':\n          return renderQ(coin.atom);\n        case 'r':\n          switch(coin.aura[1]) {\n            case 'd': return renderR('d', coin.atom);\n            case 'h': return renderR('h', coin.atom);\n            case 'q': return renderR('q', coin.atom);\n            case 's': return renderR('s', coin.atom);\n            default: return zco(coin.atom);\n          }\n        case 'u':\n          switch(coin.aura[1]) {\n            case 'c': throw new Error('aura-js: @uc rendering unsupported'); //TODO;\n            case 'b': return '0b' + split(coin.atom.toString(2), 4);\n            case 'i': return '0i' + dco(1, coin.atom);\n            case 'x': return '0x' + split(coin.atom.toString(16), 4);\n            case 'v': return '0v' + split(coin.atom.toString(32), 5);\n            case 'w': return '0w' + split(blend(6, UW_ALPHABET, coin.atom), 5);\n            default: return split(coin.atom.toString(10), 3);\n          }\n        case 's':\n          const end = (coin.atom & 1n);\n          coin.atom = end + (coin.atom >> 1n);\n          coin.aura = coin.aura.replace('s', 'u') as aura;\n          return ((end === 0n) ? '--' : '-') + rend(coin);\n        case 't':\n          if (coin.aura[1] === 'a') {\n            if (coin.aura[2] === 's') {\n              return cordToString(coin.atom);\n            } else {\n              return '~.' + cordToString(coin.atom);\n            }\n          } else {\n            return '~~' + encodeString(cordToString(coin.atom));\n          }\n        default:\n          return zco(coin.atom);\n      }\n  }\n}\n\nfunction dco(lent: number, atom: bigint): string {\n  return atom.toString(10).padStart(lent, '0');\n}\n\nfunction xco(lent: number, atom: bigint): string {\n  return atom.toString(16).padStart(lent, '0');\n}\n\nfunction zco(atom: bigint): string {\n  return '0x' + xco(1, atom);\n}\n\nfunction wack(str: string) {\n  return str.replaceAll('~', '~~').replaceAll('_', '~-');\n}\n\n//  encodeString(): encode string into @ta-safe format\n//\n//    using logic from +wood.\n//    for example, 'some Chars!' becomes '~.some.~43.hars~21.'\n//    this is url-safe encoding for arbitrary strings.\n//\nexport function encodeString(string: string) {\n  let out = '';\n  for (let i = 0; i < string.length; i += 1) {\n    const char = string[i];\n    let add = '';\n    switch (char) {\n      case ' ':\n        add = '.';\n        break;\n      case '.':\n        add = '~.';\n        break;\n      case '~':\n        add = '~~';\n        break;\n      default: {\n        const codePoint = string.codePointAt(i);\n        if (!codePoint) break;\n        //  js strings are encoded in UTF-16, so 16 bits per character.\n        //  codePointAt() reads a _codepoint_ at a character index, and may\n        //  consume up to two js string characters to do so, in the case of\n        //  16 bit surrogate pseudo-characters. here we detect that case, so\n        //  we can advance the cursor to skip past the additional character.\n        if (codePoint > 0xffff) i += 1;\n        if (\n          (codePoint >= 97 && codePoint <= 122) || // a-z\n          (codePoint >= 48 && codePoint <= 57) || // 0-9\n          char === '-'\n        ) {\n          add = char;\n        } else {\n          add = `~${codePoint.toString(16)}.`;\n        }\n      }\n    }\n    out += add;\n  }\n  return out;\n}\n\nconst UW_ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-~';\nfunction blend(bits: number, alphabet: string, atom: bigint): string {\n  if (atom === 0n) return alphabet[0];\n  let out = '';\n  const bbits = BigInt(bits);\n  while (atom !== 0n) {\n    out = alphabet[Number(BigInt.asUintN(bits, atom))] + out;\n    atom = atom >> bbits;\n  }\n  return out;\n}\n\nfunction split(str: string, group: number): string {\n  //  insert '.' every $group characters counting from the end,\n  //  while avoiding putting a leading dot at the start\n  return str.replace(new RegExp(`(?=(?:.{${group}})+$)(?!^)`, 'g'), '.');\n}\n\n//  byte-level split()\nfunction spite(atom: bigint, bytes: number, groups: number, base: number = 10): string {\n  let out = '';\n  const size = 8n * BigInt(bytes);\n  const mask = (1n << size) - 1n;\n  while (groups-- > 0) {\n    if (out !== '') out = '.' + out;\n    out = (atom & mask).toString(base) + out;\n    atom = atom >> size;\n  }\n  return out;\n}\n\nfunction cordToString(atom: bigint): string {\n  return new TextDecoder('utf-8').decode(atomToByteArray(atom).reverse());\n};\n\n//NOTE  from nockjs' bigIntToByteArray\n//REVIEW  original produced [0] for 0n... probably not correct in our contexts!\nfunction atomToByteArray(atom: bigint): Uint8Array {\n  if (atom === 0n) return new Uint8Array(0);\n  const hexString = atom.toString(16);\n  const paddedHexString = hexString.length % 2 === 0 ? hexString : '0' + hexString;\n  const arrayLength = paddedHexString.length / 2;\n  const int8Array = new Uint8Array(arrayLength);\n  for (let i = 0; i < paddedHexString.length; i += 2) {\n    const hexSubstring = paddedHexString.slice(i, i + 2);\n    const signedInt = (parseInt(hexSubstring, 16) << 24) >> 24;\n    int8Array[(i / 2)] = signedInt;\n  }\n  return int8Array;\n}\n","//  main\n\nexport * from './types';\nexport { parse, tryParse, valid, slav, slaw, nuck } from './parse';\nexport { render, scot, rend } from './render';  //TODO  expose encodeString() ?\n\n//  atom utils\n\nimport { toUnix, fromUnix, fromSeconds, toSeconds } from './d';\nexport const da = { toUnix, fromUnix };\nexport const dr = { toSeconds, fromSeconds };\n\nimport type * as pt from './p';\nimport { cite, sein, clan, kind, rankToSize, sizeToRank } from './p';\nexport const p = { cite, sein, clan, kind, rankToSize, sizeToRank };\nexport namespace p {\n  export type rank = pt.rank;\n  export type size = pt.size;\n}\n"],"names":["parseDa","x","pos","date","time","ms","split","yer","month","day","slice","at","hour","minute","sec","millis","map","m","BigInt","year","second","parseDr","rop","forEach","a","Error","yule","renderDa","yore","out","length","toString","padStart","join","renderDr","yell","push","toUnix","da","offset","DA_SECOND","epochAdjusted","DA_UNIX_EPOCH","Math","round","Number","fromUnix","unix","timeSinceEpoch","fromSeconds","seconds","toSeconds","dr","EPOCH","isLeapYear","MOH_YO","MOY_YO","DAY_YO","HOR_YO","MIT_YO","ERA_YO","CET_YO","det","cah","d","first","rest","loop","y","eras","rip","fac","muc","milliMask","match","pop","hor","mit","yall","era","cet","lep","dis","inner","mot","zis","muk","syd","key","lo","hi","kee","String","fromCharCode","murmurhash3_32_gc","seed","remainder","bytes","h1","h1b","c1","c2","k1","i","charCodeAt","F","j","arg","raku","fein","pyn","feis","fynd","cry","tail","Fe","r","b","k","f","c","fe","ell","arr","eff","tmp","L","R","Fen","fen","ahh","ale","regexP","parseP","str","syls","patp2syls","syl2bin","idx","addr","reduce","acc","syl","suffixes","indexOf","prefixes","num","ob","parseValidP","test","validSyllables","res","renderP","sxz","dyx","ceil","dyy","tsxz","timp","trep","log","pre","suf","etc","isValidP","clan","who","checkedParseP","kind","rankToSize","rank","sizeToRank","size","sein","mir","cite","replace","name","every","index","includes","renderQ","hex","lex","buf","Buffer","from","chunked","concat","chunk","Array","prefixName","byts","undefined","alg","pair","elem","parseQ","chunks","dec2hex","dec","splat","splitAt","parseValidQ","e","newArray","parseR","per","getPrecision","parse","l","w","p","renderR","rCo","deconstruct","bitMask","bits","makeNaN","makeInf","sign","int","fra","expSign","exp","makeFloat","s","intPart","floatPart","padEnd","construct","precisionBits","exponentBits","floatDits","exceed","console","warn","bias","minExp","maxExp","minUnnormExp","len","bin","denom","signal","lastBit","rounded","result","n","abs","t","edCo","dig","float","mantissaMask","exponentMask","floatMantissa","floatExponent","mantissa","exponent","mantissaHighBitIdx","unequalMargins","dragon4","outExponent","digits","hasUnequalMargins","cutoffMode","cutoffNumber","bufferSize","bexponent","pCurDigit","outBuffer","fill","scale","scaledValue","scaledMarginLow","scaledMarginHigh","log10_2","digitExponent","pow10","cutoffExponent","desired","low","high","outputDigit","scaledValueHigh","roundDown","compare","integerRegex","aft","RegExp","floatRegex","regex","slav","aura","slaw","tryParse","coin","nuck","type","atom","valid","stringToCord","dim","bisk","value","v","precision","coins","replaceAll","some","list","decodeString","jam","slurp","UV_ALPHABET","UW_ALPHABET","char","parseInt","fromCodePoint","bytesToBigint","TextEncoder","encode","alphabet","bbits","reverse","byt","parts","render","scot","rend","item","wack","encodeString","zco","spite","dco","blend","end","cordToString","lent","xco","string","add","codePoint","codePointAt","asUintN","group","groups","base","mask","TextDecoder","decode","atomToByteArray","Uint8Array","hexString","paddedHexString","arrayLength","int8Array","hexSubstring","signedInt"],"mappings":"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"}