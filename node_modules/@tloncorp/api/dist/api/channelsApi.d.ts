import { Poke } from '../http-api';
import { Action, ChannelsAction } from '../urbit';
import { Stringified } from '../utils';

import * as db from '../db';
import * as ub from '../urbit';
export declare function channelAction(channelId: string, action: Action): Poke<ChannelsAction>;
export type AddPostUpdate = {
    type: 'addPost';
    post: db.Post;
};
export type PostReactionsUpdate = {
    type: 'updateReactions';
    postId: string;
    reactions: db.Reaction[];
};
export type UnknownUpdate = {
    type: 'unknown';
};
export type PendingUpdate = {
    type: 'markPostSent';
    cacheId: string;
};
export type DeletePostUpdate = {
    type: 'deletePost';
    postId: string;
    channelId: string;
};
export type HidePostUpdate = {
    type: 'hidePost';
    postId: string;
};
export type ShowPostUpdate = {
    type: 'showPost';
    postId: string;
};
export type WritersUpdate = {
    type: 'updateWriters';
    channelId: string;
    writers: string[];
    groupId: string | null;
};
export type OrderUpdate = {
    type: 'updateOrder';
    channelId: string;
    order: string[];
};
export type CreateChannelUpdate = {
    type: 'createChannel';
    channelId: string;
    writers: string[];
    groupId: string | null;
};
export type JoinChannelSuccessUpdate = {
    type: 'joinChannelSuccess';
    channelId: string;
};
export type InitialPostsOnChannelJoin = {
    type: 'initialPostsOnChannelJoin';
    channelId: string;
    posts: db.Post[];
};
export type LeaveChannelSuccessUpdate = {
    type: 'leaveChannelSuccess';
    channelId: string;
};
export type MarkChannelReadUpdate = {
    type: 'markChannelRead';
    channelId: string;
};
export type MetaUpdate = {
    type: 'channelMetaUpdate';
    meta: Stringified<ub.ChannelMetadataSchemaV1> | null;
};
export type ChannelsUpdate = AddPostUpdate | PostReactionsUpdate | UnknownUpdate | PendingUpdate | DeletePostUpdate | HidePostUpdate | ShowPostUpdate | MetaUpdate | CreateChannelUpdate | JoinChannelSuccessUpdate | LeaveChannelSuccessUpdate | InitialPostsOnChannelJoin | OrderUpdate | WritersUpdate;
export declare const createChannel: ({ id, ...channelPayload }: ub.Create & {
    id: string;
}) => Promise<void>;
export declare function updateChannelMeta(channelId: string, metaPayload: Stringified<ub.ChannelMetadataSchemaV1> | null): Promise<void>;
export declare const setupChannelFromTemplate: (exampleChannelId: string, targetChannelId: string) => Promise<any>;
export declare const subscribeToChannelsUpdates: (eventHandler: (update: ChannelsUpdate) => void) => Promise<void>;
export declare function toClientChannelsInit(channels: ub.Channels, readersMap: Record<string, string[]>): ChannelInit[];
export type ChannelInit = {
    channelId: string;
    order: string[];
    writers: string[];
    readers: string[];
};
export declare function toClientChannelInit(id: string, channel: ub.Channel, readers: string[]): ChannelInit;
export declare const toChannelsUpdate: (channelEvent: ub.ChannelsSubscribeResponse) => ChannelsUpdate;
export declare const createNewGroupDefaultChannel: ({ groupId, currentUserId, }: {
    groupId: string;
    currentUserId: string;
}) => Promise<void>;
export declare const searchChannel: (params: {
    channelId: string;
    query: string;
    cursor?: string;
}) => Promise<{
    posts: db.Post[];
    cursor: any;
}>;
export declare const setOrder: (channelId: string, arrangedPostIds: string[]) => Promise<void>;
export declare const leaveChannel: (channelId: string) => Promise<void>;
export declare const joinChannel: (channelId: string, groupId: string) => Promise<void>;
export declare function getChannelHooksPreview(channelId: string): Promise<ub.ChannelHooksPreview>;
export declare function addChannelWriters({ channelId, writers, }: {
    channelId: string;
    writers: string[];
}): Promise<number>;
export declare function removeChannelWriters({ channelId, writers, }: {
    channelId: string;
    writers: string[];
}): Promise<number>;
//# sourceMappingURL=channelsApi.d.ts.map